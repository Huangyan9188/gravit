!function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.add-layer",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_LAYER},b.prototype.getGroup=function(){return"structure/modify"},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){var a=gApp.getActiveDocument().getScene(),b=a.getActivePage();GEditor.tryRunTransaction(b,function(){var c=new GLayer;c.setProperty("name","Layer "+a.queryCount("layer").toString()),b.appendChild(c),a.setActiveLayer(c)},ifLocale.get(this.getTitle()))},b.prototype.toString=function(){return"[Object GAddLayerAction]"},a.GAddLayerAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.delete-layer",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_LAYER},b.prototype.getGroup=function(){return"structure/modify"},b.prototype.isEnabled=function(a){return a||(a=gApp.getActiveDocument()?gApp.getActiveDocument().getScene().getActiveLayer():null),!!a},b.prototype.execute=function(a){var a=a||gApp.getActiveDocument().getScene().getActiveLayer(),b=a.getScene();if(!b)throw new Error("No scene on layer.");for(var c=null,d=a.getPrevious();null!==d;d=d.getPrevious())if(d instanceof GLayer){c=d;break}if(!c)for(var d=a.getNext();null!==d;d=d.getNext())if(d instanceof GLayer){c=d;break}return!c&&a.getParent()instanceof GLayer&&(c=a.getParent()),c?(a.hasFlag(GNode.Flag.Active)&&b.setActiveLayer(c),void GEditor.tryRunTransaction(b,function(){a.getParent().removeChild(a)},ifLocale.get(this.getTitle()))):void vex.dialog.alert("Unable to delete - the page needs to contain at least one layer.")},b.prototype.toString=function(){return"[Object GDeleteLayerAction]"},a.GDeleteLayerAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.add-page",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_PAGE},b.prototype.getGroup=function(){return"structure/modify"},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){gApp.getActiveDocument().createNewPage()},b.prototype.toString=function(){return"[Object GAddPageAction]"},a.GAddPageAction=b}(this),function(a){function b(a){this._type=a,this._title=new GLocale.Key(b,"title."+a)}GObject.inherit(b,GAction),b.Type={AlignLeft:"align-left",AlignCenter:"align-center",AlignRight:"align-right",AlignTop:"align-top",AlignMiddle:"align-middle",AlignBottom:"align-bottom",AlignJustifyHorizontal:"align-justify-horizontal",AlignJustifyVertical:"align-justify-vertical"},b.ID="arrange.align",b.prototype._type=null,b.prototype._title=null,b.prototype.getId=function(){return b.ID+"."+this._type},b.prototype.getTitle=function(){return this._title},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_ALIGN},b.prototype.getGroup=function(){var a="";switch(this._type){case b.Type.AlignLeft:case b.Type.AlignCenter:case b.Type.AlignRight:case b.Type.AlignJustifyHorizontal:a="horizontal";break;case b.Type.AlignTop:case b.Type.AlignMiddle:case b.Type.AlignBottom:case b.Type.AlignJustifyVertical:a="vertical"}return"arrange/align-"+a},b.prototype.getShortcut=function(){return null},b.prototype.isEnabled=function(a,b,c,d){return a=a||(gApp.getActiveDocument()?gApp.getActiveDocument().getEditor().getSelection():null),a?d?a.length>0:a.length>1:!1},b.prototype.execute=function(a,c,d,e){var f=gApp.getActiveDocument(),g=f.getScene();a||(a=f.getEditor().getSelection());for(var h=a,a=[],i=null,j=0;j<h.length;++j){var k=h[j];if(k.hasMixin(GElement.Transform)){var l=d?k.getGeometryBBox():k.getPaintBBox();if(!l||l.isEmpty())continue;i=i?i.united(l):l,a.push({bbox:l,element:k})}}if(!e)for(var j=0;j<a.length;++j){var l=a[j].element.getPaintBBox();l&&!l.isEmpty()&&(e=e?e.united(l):l)}e&&!e.isEmpty()&&GEditor.tryRunTransaction(g,function(){for(var d=0;d<a.length;++d){var f=c?i:a[d].bbox,g=a[d].element,h=GElementEditor.getEditor(g);switch(this._type){case b.Type.AlignLeft:h&&h.isAlignPartsAllowed()?h.alignParts(b.Type.AlignLeft,e.getX(),null):e.getX()!==f.getX()&&g.transform(new GTransform(1,0,0,1,e.getX()-f.getX(),0));break;case b.Type.AlignCenter:var j=e.getX()+e.getWidth()/2;h&&h.isAlignPartsAllowed()?h.alignParts(b.Type.AlignCenter,j,null):j!==f.getX()+f.getWidth()/2&&g.transform(new GTransform(1,0,0,1,j-f.getX()-f.getWidth()/2,0));break;case b.Type.AlignRight:var k=e.getX()+e.getWidth();h&&h.isAlignPartsAllowed()?h.alignParts(b.Type.AlignRight,k,null):k!==f.getX()+f.getWidth()&&g.transform(new GTransform(1,0,0,1,k-f.getWidth()-f.getX(),0));break;case b.Type.AlignTop:h&&h.isAlignPartsAllowed()?h.alignParts(b.Type.AlignTop,null,e.getY()):e.getY()!==f.getY()&&g.transform(new GTransform(1,0,0,1,0,e.getY()-f.getY()));break;case b.Type.AlignMiddle:var j=e.getY()+e.getHeight()/2;h&&h.isAlignPartsAllowed()?h.alignParts(b.Type.AlignMiddle,null,j):j!==f.getY()+f.getHeight()/2&&g.transform(new GTransform(1,0,0,1,0,j-f.getY()-f.getHeight()/2));break;case b.Type.AlignBottom:var l=e.getY()+e.getHeight();h&&h.isAlignPartsAllowed()?h.alignParts(b.Type.AlignBottom,null,l):l!==f.getY()+f.getHeight()&&g.transform(new GTransform(1,0,0,1,0,l-f.getHeight()-f.getY()));break;case b.Type.AlignJustifyHorizontal:(e.getX()!==f.getX()||f.getWidth()!==e.getWidth())&&g.transform(new GTransform(1,0,0,1,0,0).translated(-f.getX(),-f.getY()).scaled(e.getWidth()/f.getWidth(),1).translated(f.getX(),f.getY()).translated(e.getX()-f.getX(),0));break;case b.Type.AlignJustifyVertical:(e.getY()!==f.getY()||f.getHeight()!==e.getHeight())&&g.transform(new GTransform(1,0,0,1,0,0).translated(-f.getX(),-f.getY()).scaled(1,e.getHeight()/f.getHeight()).translated(f.getX(),f.getY()).translated(0,e.getY()-f.getY()))}}}.bind(this),ifLocale.get(this.getTitle()))},b.prototype.toString=function(){return"[Object GAlignAction]"},a.GAlignAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.clone",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"selection"},b.prototype.getShortcut=function(){return[GKey.Constant.SHIFT,GKey.Constant.META,"D"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();return a&&null!=a.getEditor().getSelection()},b.prototype.execute=function(){var a=gApp.getActiveDocument().getEditor();a.beginTransaction();try{a.cloneSelection()}finally{a.commitTransaction(ifLocale.get(this.getTitle()))}},b.prototype.toString=function(){return"[Object GCloneAction]"},a.GCloneAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.converttopath",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_PATHS},b.prototype.getGroup=function(){return"structure/modify"},b.prototype.getShortcut=function(){return[]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();if(a){var b=a.getEditor().getSelection();if(b)for(var c=0;c<b.length;++c)if(b[c]instanceof GPathBase&&!(b[c]instanceof GPath)||b[c].hasMixin(GVertexSource))return!0}return!1},b.prototype.execute=function(){var a=gApp.getActiveDocument().getEditor();a.convertSelectionToPaths()},b.prototype.toString=function(){return"[Object GConvertToPathAction]"},a.GConvertToPathAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.close",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"close"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"Q"]},b.prototype.isEnabled=function(){return!!gApp.getWindows().getActiveWindow()},b.prototype.execute=function(){gApp.getWindows().closeWindow(gApp.getWindows().getActiveWindow())},b.prototype.toString=function(){return"[Object GCloseAction]"},a.GCloseAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.close-all",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"close"},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){for(;gApp.getActiveDocument();)gApp.closeDocument(gApp.getActiveDocument())},b.prototype.toString=function(){return"[Object GCloseAllAction]"},a.GCloseAllAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.copy",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"ccp"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"C"]},b.prototype.isEnabled=function(){return document.activeElement&&$(document.activeElement).is(":editable")?!0:gApp.getActiveDocument()&&gApp.getActiveDocument().getEditor().getSelection()?!0:!1},b.prototype.execute=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))document.execCommand("copy");else{var a=GNode.order(gApp.getActiveDocument().getEditor().getSelectionCopy()),b=GNode.serialize(a);gShell.setClipboardContent(GNode.MIME_TYPE,b)}},b.prototype.toString=function(){return"[Object GCopyAction]"},a.GCopyAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.cut",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"ccp"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"X"]},b.prototype.isEnabled=function(){return document.activeElement&&$(document.activeElement).is(":editable")?!0:gApp.getActiveDocument()&&gApp.getActiveDocument().getEditor().getSelection()?!0:!1},b.prototype.execute=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))document.execCommand("cut");else{var a=gApp.getActiveDocument().getEditor();gApp.executeAction(GCopyAction.ID),a.beginTransaction();try{a.deleteSelection(!0)}finally{a.commitTransaction("Cut Selection")}}},b.prototype.toString=function(){return"[Object GCutAction]"},a.GCutAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.delete",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"ccp"},b.prototype.getShortcut=function(){return[GKey.Constant.REMOVE]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();if(a){var b=a.getEditor().getSelection();if(b)for(var c=0;c<b.length;++c)if(b[c]instanceof GItem)return!0}return!1},b.prototype.execute=function(){var a=gApp.getActiveDocument().getEditor();a.deleteSelection()},b.prototype.toString=function(){return"[Object GDeleteAction]"},a.GDeleteAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.delete-page",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_PAGE},b.prototype.getGroup=function(){return"structure/modify"},b.prototype.isEnabled=function(a){return a||(a=gApp.getActiveDocument()?gApp.getActiveDocument().getScene().getActivePage():null),!!a},b.prototype.execute=function(a){var a=a||gApp.getActiveDocument().getScene().getActivePage(),b=a.getScene();if(!b)throw new Error("No scene on page.");for(var c=null,d=a.getPrevious();null!==d;d=d.getPrevious())if(d instanceof GPage){c=d;break}if(!c)for(var d=a.getNext();null!==d;d=d.getNext())if(d instanceof GPage){c=d;break}return c?(a.hasFlag(GNode.Flag.Active)&&b.setActivePage(c),void GEditor.tryRunTransaction(b,function(){a.getParent().removeChild(a)},ifLocale.get(this.getTitle()))):void vex.dialog.alert("Unable to delete - the document needs to contain at least one page.")},b.prototype.toString=function(){return"[Object GDeletePageAction]"},a.GDeletePageAction=b}(this),function(a){function b(a){this._type=a,this._title=new GLocale.Key(b,"title."+a)}GObject.inherit(b,GAction),b.Type={Horizontal:"horizontal",Vertical:"vertical"},b.ID="arrange.distribute",b.prototype._type=null,b.prototype._title=null,b.prototype.getId=function(){return b.ID+"."+this._type},b.prototype.getTitle=function(){return this._title},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_ALIGN},b.prototype.getGroup=function(){return"arrange/align-distribute"},b.prototype.getShortcut=function(){return null},b.prototype.isEnabled=function(a,b,c){return a=a||(gApp.getActiveDocument()?gApp.getActiveDocument().getEditor().getSelection():null),a?c?a.length>1:a.length>2:!1},b.prototype.execute=function(a,c,d,e){var f=gApp.getActiveDocument(),g=f.getScene();a||(a=f.getEditor().getSelection());for(var h=a,a=[],i=0;i<h.length;++i){var j=h[i];if(j.hasMixin(GElement.Transform)){var k=c?j.getGeometryBBox():j.getPaintBBox();if(!k||k.isEmpty())continue;a.push({bbox:k,element:j})}}if(!d)for(var i=0;i<a.length;++i){var k=a[i].element.getPaintBBox();k&&!k.isEmpty()&&(d=d?d.united(k):k)}if(d&&!d.isEmpty())if(this._type===b.Type.Horizontal){if(a.sort(function(a,b){return a.bbox.getX()>b.bbox.getX()}),!e){for(var l=0,i=0;i<a.length;++i)l+=a[i].bbox.getWidth();e=(d.getWidth()-l)/(a.length-1)}GEditor.tryRunTransaction(g,function(){for(var b=d.getX(),c=0;c<a.length;++c)b!==a[c].bbox.getX()&&a[c].element.transform(new GTransform(1,0,0,1,b-a[c].bbox.getX(),0)),b+=a[c].bbox.getWidth()+e}.bind(this),ifLocale.get(this.getTitle()))}else if(this._type===b.Type.Vertical){if(a.sort(function(a,b){return a.bbox.getY()>b.bbox.getY()}),!e){for(var l=0,i=0;i<a.length;++i)l+=a[i].bbox.getHeight();e=(d.getHeight()-l)/(a.length-1)}GEditor.tryRunTransaction(g,function(){for(var b=d.getY(),c=0;c<a.length;++c)b!==a[c].bbox.getY()&&a[c].element.transform(new GTransform(1,0,0,1,0,b-a[c].bbox.getY())),b+=a[c].bbox.getHeight()+e}.bind(this),ifLocale.get(this.getTitle()))}},b.prototype.toString=function(){return"[Object GDistributeAction]"},a.GDistributeAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.duplicate",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"selection"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"D"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();return a&&null!=a.getEditor().getSelection()},b.prototype.execute=function(){var a=gApp.getActiveDocument().getEditor();a.beginTransaction();try{a.cloneSelection(!0,!0)}finally{a.commitTransaction(ifLocale.get(this.getTitle()))}},b.prototype.toString=function(){return"[Object GDuplicateAction]"},a.GDuplicateAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.zoom.fit.all",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"zoom"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"O"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument(),b=a?a.getScene().getPaintBBox():null;return b&&!b.isEmpty()},b.prototype.execute=function(){var a=gApp.getActiveDocument();if(a.getScene().getProperty("singlePage")){var b=a.getScene().getActivePage();a.getActiveWindow().getView().zoomAll(b.getPaintBBox(),!1)}else a.getActiveWindow().getView().zoomAll(a.getScene().getPaintBBox(),!1)},b.prototype.toString=function(){return"[Object GFitAllAction]"},a.GFitAllAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.zoom.fit-current-layer",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"zoom"},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument(),b=a?a.getScene().getActiveLayer():null;return b&&b.getPaintBBox()&&!b.getPaintBBox().isEmpty()},b.prototype.execute=function(){var a=gApp.getActiveDocument(),b=a.getScene().getActiveLayer();a.getActiveWindow().getView().zoomAll(b.getPaintBBox(),!1)},b.prototype.toString=function(){return"[Object GFitCurrentLayerAction]"},a.GFitCurrentLayerAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.zoom.fit-current-page",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"zoom"},b.prototype.getShortcut=function(){return[GKey.Constant.META,GKey.Constant.SHIFT,"W"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument(),b=a?a.getScene().getActivePage():null;return b&&b.getPaintBBox()&&!b.getPaintBBox().isEmpty()},b.prototype.execute=function(){var a=gApp.getActiveDocument(),b=a.getScene().getActivePage();a.getActiveWindow().getView().zoomAll(b.getPaintBBox(),!1)},b.prototype.toString=function(){return"[Object GFitCurrentPageAction]"},a.GFitCurrentPageAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.zoom.fit-selection",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"zoom"},b.prototype.getShortcut=function(){return[GKey.Constant.META,GKey.Constant.OPTION,"O"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument(),b=a?a.getEditor():null;return b&&b.hasSelection()},b.prototype.execute=function(){for(var a=gApp.getActiveDocument(),b=a?a.getEditor():null,c=b.getSelection(),d=null,e=0;e<c.length;++e){var f=c[e].getPaintBBox();f&&!f.isEmpty()&&(d=d?d.united(f):f)}d&&!d.isEmpty()&&a.getActiveWindow().getView().zoomAll(d,!1)},b.prototype.toString=function(){return"[Object GFitSelectionAction]"},a.GFitSelectionAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.group",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY},b.prototype.getGroup=function(){return"structure-group"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"G"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();if(a){var b=a.getEditor().getSelection();return b&&b.length>1}return!1},b.prototype.execute=function(){var a=gApp.getActiveDocument().getEditor(),b=a.getSelection();a.beginTransaction();try{for(var c=new GGroup,d=[],e=0;e<b.length;++e){var f=b[e];f.validateInsertion(c)&&d.push(f)}if(d.length>0){for(var e=0;e<d.length;++e){var f=d[e];f.getParent().removeChild(f),c.appendChild(f)}a.insertElements([c],!0,!0)}}finally{a.commitTransaction("Group")}},b.prototype.toString=function(){return"[Object GGroupAction]"},a.GGroupAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.join-paths",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_PATHS},b.prototype.getGroup=function(){return"structure/modify"},b.prototype.isEnabled=function(a){return a=a||(gApp.getActiveDocument()?gApp.getActiveDocument().getEditor().getSelection():null),a&&a.length>0},b.prototype.execute=function(a){var b=gApp.getActiveDocument(),c=b.getScene(),d=null;a||(d=b.getEditor().getSelection().slice(),a=d),a=GNode.order(a,!0),GEditor.tryRunTransaction(c,function(){for(var b=0;b<a.length;++b){var c=a[b],d=c.getParent();null!==c.getNext()&&(d.removeChild(c),d.appendChild(c))}}.bind(this),ifLocale.get(this.getTitle())),d&&b.getEditor().updateSelection(!1,d)},b.prototype.toString=function(){return"[Object GJoinPathsAction]"},a.GJoinPathsAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.place-image",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"insert"},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){var a=gApp.getActiveDocument(),b=$("<input>").attr("type","file").attr("accept",".jpg,.jpeg,.png,.gif,.svg").css({position:"absolute",left:"-10000px"}).on("change",function(c){var d=$(c.target)[0].files;if(d&&d.length){for(var e=a.getScene().getActivePage().getGeometryBBox().getSide(GRect.Side.TOP_LEFT),f=0;f<d.length;++f)a.importFile(d[f],function(a){a.transform(new GTransform(1,0,0,1,e.getX(),e.getY()))});b.remove()}}).appendTo($("body")).focus().trigger("click")},b.prototype.toString=function(){return"[Object GPlaceImageAction]"},a.GPlaceImageAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.invert-selection",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"select"},b.prototype.getShortcut=function(){return[GKey.Constant.SHIFT,GKey.Constant.META,"A"]},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){var a=gApp.getActiveDocument(),b=a.getScene(),c=null;c=b.getProperty("singlePage")?b.getActivePage():b;var d=[];c.accept(function(a){a instanceof GItem&&a.getParent()instanceof GLayer&&!a.hasFlag(GNode.Flag.Selected)&&d.push(a)}),a.getEditor().updateSelection(!1,d)},b.prototype.toString=function(){return"[Object GInvertSelectionAction]"},a.GInvertSelectionAction=b}(this),function(a){function b(a){this._layerType=a}GObject.inherit(b,GAction),b.ID="modify.layer-type",b.TITLE=new GLocale.Key(b,"title"),b.prototype._layerType=null,b.prototype.getId=function(){return b.ID+"."+this._layerType},b.prototype.getTitle=function(){return ifLocale.get(b.TITLE).replace("%name%",ifLocale.get(GLayer.TypeName[this._layerType]))},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_LAYER},b.prototype.getGroup=function(){return"structure/type"},b.prototype.isCheckable=function(){return!0},b.prototype.isChecked=function(){var a=gApp.getActiveDocument()?gApp.getActiveDocument().getScene().getActiveLayer():null;return a?a.getProperty("tp")===this._layerType:!1},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){var a=gApp.getActiveDocument()?gApp.getActiveDocument().getScene().getActiveLayer():null;a&&a.setProperty("tp",this._layerType)},b.prototype.toString=function(){return"[Object GLayerTypeAction]"},a.GLayerTypeAction=b}(this),function(a){function b(a,b){this._magnification=a,this._shortcut=b}GObject.inherit(b,GAction),b.ID="view.magnification",b.prototype._magnification=null,b.prototype._shortcut=null,b.prototype.getId=function(){return b.ID+"."+this._magnification.toString()},b.prototype.getTitle=function(){return this._magnification.toString()+"%"},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW_MAGNIFICATION},b.prototype.getGroup=function(){return"zoom/magnification-level"},b.prototype.getShortcut=function(){return this._shortcut},b.prototype.isEnabled=function(){return!!gApp.getWindows().getActiveWindow()},b.prototype.execute=function(){var a=gApp.getWindows().getActiveWindow().getView(),b=this._magnification/100,c=a.getScene(),d=null;if(c.getProperty("singlePage")){var e=c.getActivePage().getGeometryBBox();e&&!e.isEmpty()&&(d=e.getSide(GRect.Side.CENTER))}d||(d=a.getViewTransform().mapPoint(new GPoint(a.getWidth()/2,a.getHeight()/2))),a.zoomAt(d,b)},b.prototype.toString=function(){return"[Object GMagnificationAction]"},a.GMagnificationAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.new",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"file"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"N"]},b.prototype.execute=function(){gApp.createNewDocument()},b.prototype.toString=function(){return"[Object GNewAction]"},a.GNewAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.clone",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"view"},b.prototype.getShortcut=function(){return[GKey.Constant.META,GKey.Constant.OPTION,"N"]},b.prototype.isEnabled=function(){return!!gApp.getWindows().getActiveWindow()},b.prototype.execute=function(){gApp.getWindows().addWindow(gApp.getWindows().getActiveWindow())},b.prototype.toString=function(){return"[Object GNewWindowAction]"},a.GNewWindowAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.open",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"file"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"O"]},b.prototype.isEnabled=function(){return!!this._getViableStorage()},b.prototype.execute=function(){gApp.openDocumentFrom(this._getViableStorage())},b.prototype._getViableStorage=function(){for(var a=0;a<gravit.storages.length;++a){var b=gravit.storages[a];if(b.isAvailable()&&b.isPrompting()){var c=b.getExtensions();if(!c||c.isEmpty()||c.indexOf("gravit")>=0)return b}}return null},b.prototype.toString=function(){return"[Object GOpenAction]"},a.GOpenAction=b}(this),function(a){function b(a){this._type=a,this._title=new GLocale.Key(b,"title."+a)}GObject.inherit(b,GAction),b.Type={SendToFront:"send-front",BringForward:"bring-forward",SendBackward:"send-backward",SendToBack:"send-back"},b.ID="arrange.order",b.prototype._type=null,b.prototype._title=null,b.prototype.getId=function(){return b.ID+"."+this._type},b.prototype.getTitle=function(){return this._title},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_ARRANGE},b.prototype.getGroup=function(){return"arrange/arrange"},b.prototype.getShortcut=function(){switch(this._type){case b.Type.SendToFront:return[GKey.Constant.SHIFT,GKey.Constant.META,GKey.Constant.UP];case b.Type.BringForward:return[GKey.Constant.META,GKey.Constant.UP];case b.Type.SendBackward:return[GKey.Constant.META,GKey.Constant.DOWN];case b.Type.SendToBack:return[GKey.Constant.SHIFT,GKey.Constant.META,GKey.Constant.DOWN]}return null},b.prototype.isEnabled=function(a){return a=a||(gApp.getActiveDocument()?gApp.getActiveDocument().getEditor().getSelection():null),a&&a.length>0},b.prototype.execute=function(a){var c=gApp.getActiveDocument(),d=c.getScene(),e=null;a||(e=c.getEditor().getSelection().slice(),a=e),a=GNode.order(a,!0),GEditor.tryRunTransaction(d,function(){for(var c=0;c<a.length;++c){var d=a[c],e=d.getParent();switch(this._type){case b.Type.SendToFront:null!==d.getNext()&&(e.removeChild(d),e.appendChild(d));break;case b.Type.BringForward:if(null!==d.getNext()){var f=d.getNext()?d.getNext().getNext():null;e.removeChild(d),e.insertChild(d,f)}break;case b.Type.SendBackward:if(null!==d.getPrevious()){var f=d.getPrevious()?d.getPrevious():e.getFirstChild();e.removeChild(d),e.insertChild(d,f)}break;case b.Type.SendToBack:null!==d.getPrevious()&&(e.removeChild(d),e.insertChild(d,e.getFirstChild()))}}}.bind(this),ifLocale.get(this.getTitle())),e&&c.getEditor().updateSelection(!1,e)},b.prototype.toString=function(){return"[Object GArrangeAction]"},a.GArrangeAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.zoom.original",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"zoom"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"0"]},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){var a=gApp.getActiveDocument(),b=a.getScene().getPaintBBox();a.getActiveWindow().getView().zoomAtCenter(b&&!b.isEmpty()?b.getSide(GRect.Side.CENTER):new GPoint(0,0),1)},b.prototype.toString=function(){return"[Object GOriginalViewAction]"},a.GOriginalViewAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.pixel-preview",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"render"},b.prototype.isCheckable=function(){return!0},b.prototype.isChecked=function(){var a=gApp.getWindows().getActiveWindow();return a?a.getView().getViewConfiguration().pixelMode:!1},b.prototype.isEnabled=function(){return!!gApp.getWindows().getActiveWindow()},b.prototype.execute=function(){var a=gApp.getWindows().getActiveWindow().getView();a.getViewConfiguration().pixelMode=!a.getViewConfiguration().pixelMode,a.invalidate()},b.prototype.toString=function(){return"[Object GPixelPreviewAction]"},a.GPixelPreviewAction=b}(this),function(a){function b(a){this._paintMode=a}GObject.inherit(b,GAction),b.ID="view.page.decoration",b.TITLE=new GLocale.Key(b,"title"),b.prototype._paintMode=null,b.prototype.getId=function(){return b.ID+"."+this._paintMode},b.prototype.getTitle=function(){return ifLocale.get(b.TITLE).replace("%name%",ifLocale.get(GScenePaintConfiguration.PaintModeName[this._paintMode]))},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"paint-mode"},b.prototype.isCheckable=function(){return!0},b.prototype.isChecked=function(){var a=gApp.getWindows().getActiveWindow();return a?a.getView().getViewConfiguration().paintMode===this._paintMode:!1},b.prototype.isEnabled=function(){return!!gApp.getWindows().getActiveWindow()},b.prototype.execute=function(){var a=gApp.getWindows().getActiveWindow().getView();a.getViewConfiguration().paintMode=this._paintMode,a.invalidate()},b.prototype.toString=function(){return"[Object GPaintModeAction]"},a.GPaintModeAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.paste",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"ccp"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"V"]},b.prototype.isEnabled=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))return!0;
var a=gShell.getClipboardMimeTypes();return a&&a.indexOf(GNode.MIME_TYPE)>=0?!!gApp.getActiveDocument():!1},b.prototype.execute=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))document.execCommand("paste");else{var a=GNode.deserialize(gShell.getClipboardContent(GNode.MIME_TYPE));if(a&&a.length>0){for(var b=[],c=gApp.getActiveDocument().getEditor(),d=gApp.getActiveDocument().getScene().querySingle("page:active"),e=d.getGeometryBBox().getSide(GRect.Side.CENTER),f=0;f<a.length;++f)if(a[f]instanceof GElement){var g=a[f],h=g.getGeometryBBox(),i=h?h.getSide(GRect.Side.CENTER):new GPoint(0,0);g.transform(new GTransform(1,0,0,1,-i.getX()+e.getX(),-i.getY()+e.getY())),b.push(g)}if(b.length>0){c.beginTransaction();try{c.insertElements(b,!0,!0)}finally{c.commitTransaction("Paste")}}}}},b.prototype.toString=function(){return"[Object GPasteAction]"},a.GPasteAction=b}(this),function(a){function b(){}GObject.inherit(b,GPasteAction),b.ID="edit.paste.in-place",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"paste"},b.prototype.execute=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))document.execCommand("paste");else{var a=GNode.deserialize(gShell.getClipboardContent(GNode.MIME_TYPE));if(a&&a.length>0){for(var b=[],c=gApp.getActiveDocument().getScene().querySingle("page:active"),d=0;d<a.length;++d)if(a[d]instanceof GElement){var e=a[d];e.transform(new GTransform(1,0,0,1,c.getProperty("x"),c.getProperty("y"))),b.push(e)}if(b.length>0){var f=gApp.getActiveDocument().getEditor();f.beginTransaction();try{f.insertElements(b,!0,!0)}finally{f.commitTransaction("Paste")}}}}},b.prototype.toString=function(){return"[Object GPasteInPlaceAction]"},a.GPasteInPlaceAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.paste.inside",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"paste"},b.prototype.getShortcut=function(){return[GKey.Constant.SHIFT,GKey.Constant.META,"V"]},b.prototype.isEnabled=function(){var a=gShell.getClipboardMimeTypes();if(a&&a.indexOf(GNode.MIME_TYPE)>=0){var b=gApp.getActiveDocument();if(b){var c=b.getEditor().getSelection();if(c)for(var d=0;d<c.length;++d)if(c[d].hasMixin(GNode.Container))return!0}}return!1},b.prototype.execute=function(){var a=GNode.deserialize(gShell.getClipboardContent(GNode.MIME_TYPE));if(a&&a.length>0){for(var b=[],c=0;c<a.length;++c)a[c]instanceof GElement&&b.push(a[c]);if(b.length>0){var d=gApp.getActiveDocument().getEditor(),e=d.getSelection(),f=[];d.beginTransaction();try{for(var c=0;c<e.length;++c){var g=e[c];if(g.hasMixin(GNode.Container)){for(var h=[],i=0;i<b.length;++i)b[i].validateInsertion(g)&&h.push(b[i].clone());for(var j=GElement.prototype.getGroupGeometryBBox(h),k=j?j.getSide(GRect.Side.CENTER):new GPoint(0,0),l=g instanceof GElement?g.getGeometryBBox():null,m=l?l.getSide(GRect.Side.CENTER):new GPoint(0,0),i=0;i<h.length;++i)h[i].transform(new GTransform(1,0,0,1,-k.getX()+m.getX(),-k.getY()+m.getY())),g.appendChild(h[i]),f.push(h[i])}}d.updateSelection(!1,f)}finally{d.commitTransaction("Paste Inside")}}}},b.prototype.toString=function(){return"[Object GPasteInsideAction]"},a.GPasteInsideAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.paste.style",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"paste"},b.prototype.getShortcut=function(){return[GKey.Constant.F4]},b.prototype.isEnabled=function(){var a=gShell.getClipboardMimeTypes();if(a&&a.indexOf(GNode.MIME_TYPE)>=0){var b=gApp.getActiveDocument();if(b){var c=b.getEditor().getSelection();if(c)for(var d=0;d<c.length;++d)if(c[d].hasMixin(GStylable))return!0}}return!1},b.prototype.execute=function(){var a=GNode.deserialize(gShell.getClipboardContent(GNode.MIME_TYPE));if(a&&a.length>0){for(var b=null,c=0;c<a.length;++c)if(a[c].hasMixin(GStylable)){b=a[c];break}var d=gApp.getActiveDocument().getEditor(),e=d.getSelection();d.beginTransaction();try{for(var c=0;c<e.length;++c){var f=e[c];f.hasMixin(GStylable)&&f.assignStyleFrom(b)}}finally{d.commitTransaction("Paste Style")}}},b.prototype.toString=function(){return"[Object GPasteStyleAction]"},a.GPasteStyleAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.redo",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){var a=ifLocale.get(b.TITLE),c=gApp.getActiveDocument();return c&&c.getEditor().hasRedoState()&&(a+=" "+c.getEditor().getRedoStateName()),a},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"undo_redo"},b.prototype.getShortcut=function(){return[GKey.Constant.SHIFT,GKey.Constant.META,"z"]},b.prototype.isEnabled=function(){return document.activeElement&&$(document.activeElement).is(":editable")?!0:gApp.getActiveDocument()&&gApp.getActiveDocument().getEditor().hasRedoState()?!0:!1},b.prototype.execute=function(){document.activeElement&&$(document.activeElement).is(":editable")?document.execCommand("redo"):gApp.getActiveDocument().getEditor().redoState()},b.prototype.toString=function(){return"[Object GRedoAction]"},a.GRedoAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.save",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"file"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"S"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();return a&&a.isSaveable()},b.prototype.execute=function(){gApp.getActiveDocument().save()},b.prototype.toString=function(){return"[Object GSaveAction]"},a.GSaveAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.save-all",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"file"},b.prototype.isEnabled=function(){for(var a=gApp.getDocuments(),b=0;b<a.length;++b)if(a[b].isSaveable())return!0;return!1},b.prototype.execute=function(){for(var a=gApp.getDocuments(),b=0;b<a.length;++b)a[b].isSaveable()&&a[b].save()},b.prototype.toString=function(){return"[Object GSaveAllAction]"},a.GSaveAllAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="file.save-as",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_FILE},b.prototype.getGroup=function(){return"file"},b.prototype.getShortcut=function(){return[GKey.Constant.SHIFT,GKey.Constant.META,"S"]},b.prototype.isEnabled=function(){return!!this._getViableStorage()&&!!gApp.getActiveDocument()},b.prototype.execute=function(){gApp.saveDocumentAs(this._getViableStorage(),gApp.getActiveDocument())},b.prototype._getViableStorage=function(){for(var a=0;a<gravit.storages.length;++a){var b=gravit.storages[a];if(b.isAvailable()&&b.isPrompting()&&b.isSaving()){var c=b.getExtensions();if(!c||c.isEmpty()||c.indexOf("gravit")>=0)return b}}return null},b.prototype.toString=function(){return"[Object GSaveAsAction]"},a.GSaveAsAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.show-rulers",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"show"},b.prototype.getShortcut=function(){return[GKey.Constant.META,GKey.Constant.OPTION,"R"]},b.prototype.isEnabled=function(){return!1},b.prototype.isCheckable=function(){return!0},b.prototype.isChecked=function(){return!1},b.prototype.execute=function(){return!1},b.prototype.toString=function(){return"[Object GShowRulersAction]"},a.GShowRulersAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.select-all",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"select"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"A"]},b.prototype.isEnabled=function(){return document.activeElement&&$(document.activeElement).is(":editable")?!0:gApp.getActiveDocument()?!0:!1},b.prototype.execute=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))document.execCommand("selectAll");else{var a=gApp.getActiveDocument().getEditor(),b=gApp.getActiveDocument().getScene(),c=null;c=b.getProperty("singlePage")?b.getActivePage():b;var d=[];c.accept(function(a){a instanceof GItem&&a.getParent()instanceof GLayer&&d.push(a)}),a.updateSelection(!1,d)}},b.prototype.toString=function(){return"[Object GSelectAllAction]"},a.GSelectAllAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.show-all-pages",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"render"},b.prototype.isCheckable=function(){return!0},b.prototype.isChecked=function(){var a=gApp.getActiveDocument();return a?!a.getScene().getProperty("singlePage"):!1},b.prototype.isEnabled=function(){return!!gApp.getActiveDocument()},b.prototype.execute=function(){var a=gApp.getActiveDocument().getScene();a.setProperty("singlePage",!a.getProperty("singlePage"))},b.prototype.toString=function(){return"[Object GShowAllPagesAction]"},a.GShowAllPagesAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.show-grid",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW},b.prototype.getGroup=function(){return"show"},b.prototype.getShortcut=function(){return[GKey.Constant.META,GKey.Constant.OPTION,"G"]},b.prototype.isEnabled=function(){return!!gApp.getWindows().getActiveWindow()},b.prototype.isCheckable=function(){return!0},b.prototype.isChecked=function(){var a=gApp.getWindows().getActiveWindow();return a?a.getView().getViewConfiguration().gridVisible===!0:!1},b.prototype.execute=function(){var a=gApp.getWindows().getActiveWindow().getView();a.getViewConfiguration().gridVisible=!a.getViewConfiguration().gridVisible,a.invalidate()},b.prototype.toString=function(){return"[Object GShowGridAction]"},a.GShowGridAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.slice-from-selection",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY},b.prototype.getGroup=function(){return"structure-convert"},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();return a?a.getEditor().hasSelection():!1},b.prototype.execute=function(){var a=gApp.getActiveDocument(),b=a.getScene(),c=a.getEditor(),d=a.getEditor().getSelectionBBox(!1);d&&!d.isEmpty()&&GEditor.tryRunTransaction(b,function(){var a=new GSlice;a.setProperty("trf",new GTransform(d.getWidth()/2,0,0,d.getHeight()/2,d.getX()+d.getWidth()/2,d.getY()+d.getHeight()/2)),b.getActiveLayer().appendChild(a),c.updateSelection(!1,[a])},ifLocale.get(this.getTitle()))},b.prototype.toString=function(){return"[Object GSliceFromSelectionAction]"},a.GSliceFromSelectionAction=b}(this),function(a){function b(a){this._type=a,this._title=new GLocale.Key(b,"title."+a)}GObject.inherit(b,GAction),b.Type={FullUnit:"full",HalfUnit:"half"},b.ID="arrange.snap-unit",b.prototype._type=null,b.prototype._title=null,b.prototype.getId=function(){return b.ID+"."+this._type},b.prototype.getTitle=function(){return this._title},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_ALIGN},b.prototype.getGroup=function(){return"arrange/snap-unit"},b.prototype.getShortcut=function(){return null},b.prototype.isEnabled=function(a){return a=a||(gApp.getActiveDocument()?gApp.getActiveDocument().getEditor().getSelection():null),a&&a.length>0},b.prototype.execute=function(a){var c=gApp.getActiveDocument(),d=c.getScene();a||(a=c.getEditor().getSelection()),GEditor.tryRunTransaction(d,function(){for(var c=0;c<a.length;++c){var d=a[c];if(d.hasMixin(GElement.Transform)){var e=d.getGeometryBBox();if(e&&!e.isEmpty()){var f=GMath.round(e.getX(),!0),g=GMath.round(e.getY(),!0),h=GMath.round(e.getWidth(),!0),i=GMath.round(e.getHeight(),!0);this._type===b.Type.HalfUnit&&(f+=.5,g+=.5,h+=.5,i+=.5);var j=(new GTransform).translated(-e.getX(),-e.getY()).scaled(h/e.getWidth(),i/e.getHeight()).translated(e.getX(),e.getY()).translated(f-e.getX(),g-e.getY());d.transform(j)}}}}.bind(this),ifLocale.get(this.getTitle()))},b.prototype.toString=function(){return"[Object GSnapUnitAction]"},a.GSnapUnitAction=b}(this),function(a){function b(a){this._type=a,this._title=new GLocale.Key(b,"title."+a)}GObject.inherit(b,GAction),b.Type={Rotate45Left:"rotate-45-left",Rotate90Left:"rotate-90-left",Rotate180Left:"rotate-180-left",Rotate45Right:"rotate-45-right",Rotate90Right:"rotate-90-right",Rotate180Right:"rotate-180-right",FlipVertical:"flip-vertical",FlipHorizontal:"flip-horizontal"},b.ID="arrange.transform",b.prototype._type=null,b.prototype._title=null,b.prototype.getId=function(){return b.ID+"."+this._type},b.prototype.getTitle=function(){return this._title},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY_TRANSFORM},b.prototype.getGroup=function(){var a="";switch(this._type){case b.Type.Rotate45Left:case b.Type.Rotate90Left:case b.Type.Rotate180Left:a="rotate-left";break;case b.Type.Rotate45Right:case b.Type.Rotate90Right:case b.Type.Rotate180Right:a="rotate-right";break;case b.Type.FlipVertical:case b.Type.FlipHorizontal:a="flip"}return"arrange/transform-"+a},b.prototype.getShortcut=function(){return null},b.prototype.isEnabled=function(a){return a=a||(gApp.getActiveDocument()?gApp.getActiveDocument().getEditor().getSelection():null),a&&a.length>0},b.prototype.execute=function(a){var c=gApp.getActiveDocument(),d=c.getScene();a||(a=c.getEditor().getSelection()),GEditor.tryRunTransaction(d,function(){for(var c=0;c<a.length;++c){var d=a[c],e=d.getGeometryBBox();if(d.hasMixin(GElement.Transform)&&e&&!e.isEmpty()){var f=e.getSide(GRect.Side.CENTER),g=0,h=1,i=1;switch(this._type){case b.Type.Rotate45Left:g=-45;break;case b.Type.Rotate90Left:g=-90;break;case b.Type.Rotate180Left:g=-180;break;case b.Type.Rotate45Right:g=45;break;case b.Type.Rotate90Right:g=90;break;case b.Type.Rotate180Right:g=180;break;case b.Type.FlipVertical:i=-1;break;case b.Type.FlipHorizontal:h=-1}var j=(new GTransform).translated(-f.getX(),-f.getY()).scaled(h,i).rotated(GMath.toRadians(g)).translated(f.getX(),f.getY());d.transform(j)}}}.bind(this),ifLocale.get(this.getTitle()))},b.prototype.toString=function(){return"[Object GTransformAction]"},a.GTransformAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="edit.undo",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){var a=ifLocale.get(b.TITLE),c=gApp.getActiveDocument();return c&&c.getEditor().hasUndoState()&&(a+=" "+c.getEditor().getUndoStateName()),a},b.prototype.getCategory=function(){return GApplication.CATEGORY_EDIT},b.prototype.getGroup=function(){return"undo_redo"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"z"]},b.prototype.isEnabled=function(){return document.activeElement&&$(document.activeElement).is(":editable")?!0:gApp.getActiveDocument()&&gApp.getActiveDocument().getEditor().hasUndoState()?!0:!1},b.prototype.execute=function(){document.activeElement&&$(document.activeElement).is(":editable")&&!$(document.activeElement).is(":button")?document.execCommand("undo"):gApp.getActiveDocument().getEditor().undoState()},b.prototype.toString=function(){return"[Object GUndoAction]"},a.GUndoAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="modify.ungroup",b.TITLE=new GLocale.Key(b,"title"),b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_MODIFY},b.prototype.getGroup=function(){return"structure-group"},b.prototype.getShortcut=function(){return[GKey.Constant.SHIFT,GKey.Constant.META,"G"]},b.prototype.isEnabled=function(){var a=gApp.getActiveDocument();if(a){var b=a.getEditor().getSelection();if(b)for(var c=0;c<b.length;++c)if(b[c]instanceof GGroup)return!0}return!1},b.prototype.execute=function(){var a=gApp.getActiveDocument().getEditor(),b=a.getSelection();a.beginTransaction();try{for(var c=[],d=0;d<b.length;++d){var e=b[d];if(e instanceof GGroup){var f=e.getParent(),g=e.getNext(),h=e.getChildren();f.removeChild(e);for(var i=0;i<h.length;++i){var j=h[i];e.removeChild(j),f.insertChild(j,g),c.push(j)}}}c.length>0&&a.updateSelection(!1,c)}finally{a.commitTransaction("Ungroup")}},b.prototype.toString=function(){return"[Object GUngroupAction]"},a.GUngroupAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="view.zoom.in",b.TITLE=new GLocale.Key(b,"title"),b.ZOOM_STEP=2,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW_MAGNIFICATION},b.prototype.getGroup=function(){return"zoom/magnification"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"+"]},b.prototype.isEnabled=function(){var a=gApp.getWindows().getActiveWindow(),b=a?a.getView():null;return b&&b.getZoom()<GSceneWidget.options.maxZoomFactor},b.prototype.execute=function(){var a=gApp.getWindows().getActiveWindow().getView(),c=a.getZoom()*b.ZOOM_STEP,d=a.getScene(),e=null;if(d.getProperty("singlePage")){var f=d.getActivePage().getGeometryBBox();f&&!f.isEmpty()&&(e=f.getSide(GRect.Side.CENTER))}e||(e=a.getViewTransform().mapPoint(new GPoint(a.getWidth()/2,a.getHeight()/2))),a.zoomAt(e,c)},b.prototype.toString=function(){return"[Object GZoomInAction]"},a.GZoomInAction=b}(this),function(a){function b(){}GObject.inherit(b,GAction),b.ID="zoom.out",b.TITLE=new GLocale.Key(b,"title"),b.ZOOM_STEP=2,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getCategory=function(){return GApplication.CATEGORY_VIEW_MAGNIFICATION},b.prototype.getGroup=function(){return"zoom/magnification"},b.prototype.getShortcut=function(){return[GKey.Constant.META,"-"]},b.prototype.isEnabled=function(){var a=gApp.getWindows().getActiveWindow(),b=a?a.getView():null;return b&&b.getZoom()>GSceneWidget.options.minZoomFactor},b.prototype.execute=function(){var a=gApp.getWindows().getActiveWindow().getView(),c=a.getZoom()/b.ZOOM_STEP,d=a.getScene(),e=null;if(d.getProperty("singlePage")){var f=d.getActivePage().getGeometryBBox();f&&!f.isEmpty()&&(e=f.getSide(GRect.Side.CENTER))}e||(e=a.getViewTransform().mapPoint(new GPoint(a.getWidth()/2,a.getHeight()/2))),a.zoomAt(e,c)},b.prototype.toString=function(){return"[Object GZoomOutAction]"},a.GZoomOutAction=b}(this),function(a){function b(a){this._style=a}b.prototype._style=null,b.prototype.open=function(a){var b=this._style.getProperty("ps"),c=function(a){var c="";switch(a){case GStylable.PropertySet.Style:c="Style Settings";break;case GStylable.PropertySet.Effects:c="Effects";break;case GStylable.PropertySet.Fill:c="Fill";break;case GStylable.PropertySet.Border:c="Border";break;case GStylable.PropertySet.Text:c="Text";break;case GStylable.PropertySet.Paragraph:c="Paragraph"}return $("<label></label>").css({display:"inline-block",width:"100px"}).append($("<input>").attr("type","checkbox").attr("data-property-set",a).prop("checked",b.indexOf(a)>=0)).append($("<span></span>").text(c))},d=$("<table></table>").addClass("g-form").css({}).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Style Name:")).append($("<td></td>").append($("<input>").attr("data-property","name").css("width","100%").val(this._style.getProperty("name"))))).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Properties:")).append($("<td></td>").append(c(GStylable.PropertySet.Style)).append(c(GStylable.PropertySet.Effects)).append("<br/>").append(c(GStylable.PropertySet.Fill)).append(c(GStylable.PropertySet.Border)).append("<br/>").append(c(GStylable.PropertySet.Text)).append(c(GStylable.PropertySet.Paragraph))));vex.dialog.open({input:d,message:"",callback:function(b){var c=function(){var a=[];for(var b in GStylable.PropertySet){var c=GStylable.PropertySet[b];d.find('[data-property-set="'+c+'"]').is(":checked")&&a.push(c)}this._style.setProperties(["name","ps"],[d.find('[data-property="name"]').val(),a])}.bind(this);a&&a(!!b,c)}.bind(this)})},a.GStyleDialog=b}(this),function(a){function b(){GExporter.call(this)}GObject.inherit(b,GExporter),b.prototype.isStandalone=function(){return!1},b.prototype.getName=function(){return"Raster Image"},b.prototype.getExtensions=function(){return["png","jpg"]},b.prototype.exportPart=function(a,b,c,d,e){var b=GExporter.parseSize(b),f=a.toBitmap(b.width,b.height?b.height:b.width,2);f&&f.toImageBuffer(this._getImageTypeByExt(e),function(a){c.save(d,a,!0)})},b.prototype._getImageTypeByExt=function(a){if("png"===a)return GBitmap.ImageType.PNG;if("jpg"===a)return GBitmap.ImageType.JPEG;throw new Error("Unknown image extension - "+a)},a.GImageExporter=b}(this),function(a){function b(){GPalette.call(this)}GObject.inherit(b,GPalette),b.ID="align",b.TITLE=new GLocale.Key(b,"title"),b._AlignTo={Selection:"selection",Layer:"layer",Page:"page",PageMargins:"page-margins",FirstElement:"first-element",LastElement:"last-element"},b.prototype._htmlElement=null,b.prototype._document=null,b.prototype._elements=null,b.prototype._savedAlignTo=b._AlignTo.Selection,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"modify"},b.prototype.isEnabled=function(){return null!==this._document&&this._elements&&this._elements.length>0},b.prototype.init=function(a,c){GPalette.prototype.init.call(this,a,c),this._htmlElement=a,a.css("height","115px").append($("<div></div>").css({position:"absolute",top:"5px",left:"5px"}).append($("<button></button>").attr("title","Align Left").attr("data-align",GAlignAction.Type.AlignLeft).append($("<span></span>").addClass("fa fa-align-left"))).append($("<button></button>").attr("title","Align Center").attr("data-align",GAlignAction.Type.AlignCenter).append($("<span></span>").addClass("fa fa-align-center"))).append($("<button></button>").attr("title","Align Right").attr("data-align",GAlignAction.Type.AlignRight).append($("<span></span>").addClass("fa fa-align-right"))).append($("<button></button>").attr("title","Justify Horizontal").attr("data-align",GAlignAction.Type.AlignJustifyHorizontal).append($("<span></span>").addClass("fa fa-align-justify fa-rotate-270"))).append($("<button></button>").css("margin-left","10px").attr("title","Distribute Horizontal").attr("data-dist",GDistributeAction.Type.Horizontal).append($("<span></span>").addClass("fa fa-reorder fa-rotate-270"))).append($("<input>").attr("title","Horizontal Spacing, zero will auto-space").attr("data-dist",GDistributeAction.Type.Horizontal).css("width","38px").val("0"))).append($("<div></div>").css({position:"absolute",top:"30px",left:"5px"}).append($("<button></button>").attr("title","Align Top").attr("data-align",GAlignAction.Type.AlignTop).append($("<span></span>").addClass("fa fa-align-right fa-rotate-270"))).append($("<button></button>").attr("title","Align Middle").attr("data-align",GAlignAction.Type.AlignMiddle).append($("<span></span>").addClass("fa fa-align-center fa-rotate-270"))).append($("<button></button>").attr("title","Align Bottom").attr("data-align",GAlignAction.Type.AlignBottom).append($("<span></span>").addClass("fa fa-align-left fa-rotate-270"))).append($("<button></button>").attr("title","Justify Vertical").attr("data-align",GAlignAction.Type.AlignJustifyVertical).append($("<span></span>").addClass("fa fa-align-justify"))).append($("<button></button>").css("margin-left","10px").attr("title","Distribute Vertical").attr("data-dist",GDistributeAction.Type.Vertical).append($("<span></span>").addClass("fa fa-reorder"))).append($("<input>").attr("title","Vertical Spacing, zero will auto-space").attr("data-dist",GDistributeAction.Type.Vertical).css("width","38px").val("0"))).append($("<label></label>").css({position:"absolute",top:"65px",right:"5px"}).text("Use Geometry:").append($("<input>").attr("type","checkbox").attr("data-align-geometry","").prop("checked",!0))).append($("<label></label>").css({position:"absolute",top:"65px",left:"5px"}).text("Align To:").append($("<select></select>").css({width:"90px",position:"absolute",top:"24px",left:"0px"}).attr("data-option","align-to").append($("<option></option>").attr("value",b._AlignTo.Selection).text("Selection")).append($("<option></option>").attr("value",b._AlignTo.Layer).text("Layer")).append($("<option></option>").attr("value",b._AlignTo.Page).text("Page")).append($("<option></option>").attr("value",b._AlignTo.PageMargins).text("Page Margins")).append($("<option></option>").attr("value",b._AlignTo.FirstElement).text("First Element")).append($("<option></option>").attr("value",b._AlignTo.LastElement).text("Last Element")).on("change",function(a){this._savedAlignTo=$(a.target).val(),this._updateStates()}.bind(this)))).append($("<label></label>").css({position:"absolute",top:"89px",right:"5px"}).text("Align Selection:").append($("<input>").attr("type","checkbox").attr("data-align-selection","").prop("checked",!0)));var d=function(a){this._executeAction($(a.target).closest("button").attr("data-align"),"align")}.bind(this),e=function(a){this._executeAction($(a.target).closest("button").attr("data-dist"),"dist")}.bind(this);a.find("button[data-align]").each(function(a,b){$(b).on("click",d)}),a.find("button[data-dist]").each(function(a,b){$(b).on("click",e)}),a.find("input[data-dist]").each(function(a,b){$(b).on("keyup",function(a){13===a.keyCode&&e.call(this,a)})})},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getEditor();b.addEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),this._updateFromSelection(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getEditor();b.removeEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),this._document=null,this._elements=null,this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._updateFromSelection=function(){this._elements=null;var a=this._document.getEditor().getSelection();if(a)for(var c=0;c<a.length;++c)a[c].hasMixin(GElement.Transform)&&(this._elements||(this._elements=[]),this._elements.push(a[c]));this._htmlElement.find('select[data-option="align-to"]').val(this._elements&&1===this._elements.length?b._AlignTo.Page:this._savedAlignTo),this._updateStates(),this.trigger(GPalette.UPDATE_EVENT)},b.prototype._getActionArgs=function(a,c){var d=null,e=this._elements.slice(),f=this._document.getScene(),g=f.getActivePage(),h=f.getActiveLayer(),i=this._htmlElement.find('select[data-option="align-to"]').val();switch(i){case b._AlignTo.Layer:d=h.getPaintBBox();break;case b._AlignTo.Page:d=g.getGeometryBBox();break;case b._AlignTo.PageMargins:d=g.getGeometryBBox().expanded(-g.getProperty("ml"),-g.getProperty("mt"),-g.getProperty("mr"),-g.getProperty("mb"));break;case b._AlignTo.FirstElement:d=e[0],e.splice(0);break;case b._AlignTo.LastElement:d=e[e.length-1],e.splice(e.length-1)}if(e.length>0){var j=this._htmlElement.find("input[data-align-geometry]").is(":checked");if("align"===c){var k=i!==b._AlignTo.Selection?this._htmlElement.find("input[data-align-selection]").is(":checked"):!1;return{actionId:GAlignAction.ID+"."+a,actionParams:[e,k,j,d]}}if("dist"===c){var l=f.stringToPoint(this._htmlElement.find('input[data-dist="'+a+'"]').val())||0;return{actionId:GDistributeAction.ID+"."+a,actionParams:[e,j,d,l]}}throw new Error("Unknown align mode: "+c)}},b.prototype._executeAction=function(a,b){var c=this._getActionArgs(a,b);c&&gApp.executeAction(c.actionId,c.actionParams)},b.prototype._isActionEnabled=function(a,b){if(!this.isEnabled())return!1;var c=this._getActionArgs(a,b);return c?gApp.canExecuteAction(c.actionId,c.actionParams):!1},b.prototype._updateStates=function(){var a=this._htmlElement.find('select[data-option="align-to"]').val(),c=a!==b._AlignTo.Selection&&this._elements.length>1;this._htmlElement.find("input[data-align-selection]").prop("disabled",!c),this._htmlElement.find("[data-align]").each(function(a,b){var c=$(b);c.prop("disabled",!this._isActionEnabled(c.attr("data-align"),"align"))}.bind(this)),this._htmlElement.find("[data-dist]").each(function(a,b){var c=$(b);c.prop("disabled",!this._isActionEnabled(c.attr("data-dist"),"dist"))}.bind(this))},b.prototype.toString=function(){return"[Object GAlignPalette]"},a.GAlignPalette=b}(this),function(a){function b(){GPalette.call(this),this._extensions=[]}GObject.inherit(b,GPalette),b.ID="export",b.TITLE=new GLocale.Key(b,"title"),b.prototype._htmlElement=null,b.prototype._controls=null,b.prototype._document=null,b.prototype._element=null,b.prototype._extensions=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"modify"},b.prototype.isEnabled=function(){return null!==this._document&&null!==this._element},b.prototype.init=function(a,b){GPalette.prototype.init.call(this,a,b);for(var c=0;c<gravit.exporters.length;++c){var d=gravit.exporters[c];if(!d.isStandalone())for(var e=d.getExtensions(),f=0;f<e.length;++f)this._extensions.push({extension:e[f].toLowerCase(),exporter:d})}this._htmlElement=a,this._controls=b,$("<button></button>").attr("data-action","add").attr("title","Add Export").on("click",function(){var a=this._element.getProperty("export",!0);a=a?a.slice():[],a.push({sz:"1x",sf:"",ex:gravit.exporters[0].getExtensions()[0]}),this._element.setProperty("export",a,!0)}.bind(this)).append($("<span></span>").addClass("fa fa-plus")).appendTo(b),$("<div></div>").addClass("title").appendTo(this._htmlElement),$("<div></div>").addClass("g-list export-table").appendTo(this._htmlElement),$("<div></div>").addClass("controls").attr("data-action","export-all").append($("<button></button>").on("click",function(){var a=gApp.getMatchingStorage(!0,!0,null,!0,this._document.getStorage());a&&a.openDirectoryPrompt(this._document.getUrl(),function(b){for(var c=this._element.getProperty("export",!0),d=0;d<c.length;++d){var e=c[d],f=new URI(b).filename(this._element.getLabel()+e.sf+"."+e.ex).toString();this._getExporterByExt(e.ex).exportPart(this._element,e.sz,a,f,e.ex)}}.bind(this))}.bind(this)).append($("<span></span>").text("Export All..."))).appendTo(this._htmlElement)},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene(),c=this._document.getEditor();b.addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),c.addEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),this._updateFromSelection()
}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene(),c=this._document.getEditor();b.removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),c.removeEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),this._document=null,this._element=null,this._updateExports(),this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._afterPropertiesChange=function(a){a.node===this._element&&(a.properties.indexOf("export")>=0||a.properties.indexOf("name")>=0)&&this._updateExports()},b.prototype._updateFromSelection=function(){this._element=null;var a=this._document?this._document.getEditor().getSelection():null;a&&1===a.length?this._element=a[0]:this._document&&(this._element=this._document.getScene().getActivePage()),this._updateExports(),this.trigger(GPalette.UPDATE_EVENT)},b.prototype._updateExports=function(){var a=this._htmlElement.find(".export-table"),b=this._htmlElement.find(".title");if(a.empty(),b.text(""),this._htmlElement.find('[data-action="export-all"]').prop("disabled",!this._element),this._element){var c=this._element.getProperty("name"),d="Export "+this._element.getNodeNameTranslated();c&&""!==c.trim()&&(d+=' "'+c+'"'),d+=" as:",b.text(d);var e=function(b,c){for(var d=$("<select></select>"),e=0;e<this._extensions.length;++e){var f=this._extensions[e];$("<option></option>").text(f.extension.toUpperCase()).val(f.extension).appendTo(d)}$("<div></div>").addClass("export-row").data("export-index",e).append($("<div></div>").addClass("export-cell").append($("<input>").css("width","86px").attr("placeholder","Size").val(b.sz).on("change",function(a){b.sz=$(a.target).val()})).append($("<input>").css("width","58px").attr("placeholder","Suffix").val(b.sf).on("change",function(a){b.sf=$(a.target).val()})).append(d.val(b.ex).on("change",function(a){b.ex=$(a.target).val()}))).append($("<div></div>").addClass("export-cell").append($("<button></button>").attr("title","Export this item only").on("click",function(){var a=gApp.getMatchingStorage(!0,!0,b.ex,!1,this._document.getStorage());a&&a.saveResourcePrompt(this._document.getUrl(),this._element.getLabel()+b.sf,[b.ex],function(c){this._getExporterByExt(b.ex).exportPart(this._element,b.sz,a,c,b.ex)}.bind(this))}.bind(this)).append($("<span></span>").addClass("fa fa-external-link-square"))).append($("<button></button>").append($("<span></span>").addClass("fa fa-trash-o")).on("click",function(){var a=this._element.getProperty("export",!0).slice();a.splice(c,1),this._element.setProperty("export",a,!0)}.bind(this)))).appendTo(a)}.bind(this),f=this._element.getProperty("export",!0);if(f&&f.length>0)for(var g=0;g<f.length;++g)e(f[g],g)}this._controls.find('[data-action="add"]').prop("disabled",!this._element)},b.prototype._getExporterByExt=function(a){a=a.toLowerCase();for(var b=0;b<this._extensions.length;++b)if(this._extensions[b].extension===a)return this._extensions[b].exporter;return null},b.prototype.toString=function(){return"[Object GExportPalette]"},a.GExportPalette=b}(this),function(a){function b(){GPalette.call(this)}GObject.inherit(b,GPalette),b.ID="layers",b.TITLE=new GLocale.Key(b,"title"),b.prototype._layersTree=null,b.prototype._layersTreeNodeMap=null,b.prototype._layerAddControl=null,b.prototype._layerDeleteControl=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"structure"},b.prototype.isEnabled=function(){return null!==this._document},b.prototype.isAutoSize=function(){return!0},b.prototype.init=function(a,b){GPalette.prototype.init.call(this,a,b),this._layersTree=$("<div></div>").addClass("g-list layers").tree({data:[],dragAndDrop:!0,openFolderDelay:500,closedIcon:$('<span class="fa fa-caret-right"></span>'),openedIcon:$('<span class="fa fa-caret-down"></span>'),slide:!1,selectable:!1,onIsMoveHandle:function(a){return a.is(".jqtree-title")},onCreateLi:this._createLayerTreeItem.bind(this),onCanMoveTo:this._canMoveLayerTreeNode.bind(this)}).on("tree.open",function(a){a.node.layerOrItem&&a.node.layerOrItem.setFlag(GNode.Flag.Expanded)}.bind(this)).on("tree.close",function(a){a.node.layerOrItem&&a.node.layerOrItem.removeFlag(GNode.Flag.Expanded)}.bind(this)).on("tree.click",this._clickLayerTreeNode.bind(this)).on("tree.move",this._moveLayerTreeNode.bind(this)).appendTo(a),this._layerAddControl=$("<button></button>").attr("title","Add Layer").on("click",function(){gApp.executeAction(GAddLayerAction.ID)}.bind(this)).append($("<span></span>").addClass("fa fa-plus")).appendTo(b),this._layerDeleteControl=$("<button></button>").attr("title","Delete Layer").on("click",function(){gApp.executeAction(GDeleteLayerAction.ID)}.bind(this)).append($("<span></span>").addClass("fa fa-trash-o")).appendTo(b)},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene();b.addEventListener(GNode.AfterInsertEvent,this._afterNodeInsert,this),b.addEventListener(GNode.BeforeRemoveEvent,this._beforeNodeRemove,this),b.addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),b.addEventListener(GNode.AfterFlagChangeEvent,this._afterFlagChange,this),this._clear(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene();this._document=null,b.removeEventListener(GNode.AfterInsertEvent,this._afterNodeInsert,this),b.removeEventListener(GNode.BeforeRemoveEvent,this._beforeNodeRemove,this),b.removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),b.removeEventListener(GNode.AfterFlagChangeEvent,this._afterFlagChange,this),this._clear(),this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._clear=function(){if(this._layersTree.tree("loadData",[]),this._layersTree.tree("getTree").is_open=!0,this._layersTreeNodeMap=[],this._document){var a=this._document.getScene().getActivePage();if(a)for(var b=a.getFirstChild();null!==b;b=b.getNext())b instanceof GLayer&&this._insertLayer(b)}},b.prototype._insertLayer=function(a){var b=GUtil.uuid(),c=a.getPrevious()?this._getLayerTreeNode(a.getPrevious()):null;if(c)this._layersTree.tree("addNodeBefore",{id:b,layerOrItem:a},c);else{var d=a.getParent(),e=!d||d instanceof GPage?null:this._getLayerTreeNode(d),f=null;if(e)e.children&&e.children.length&&(f=e.children[0]);else{var g=this._layersTree.tree("getTree");g&&g.children&&g.children.length&&(f=g.children[0])}f?this._layersTree.tree("addNodeBefore",{id:b,layerOrItem:a},f):this._layersTree.tree("appendNode",{id:b,layerOrItem:a},e)}if(this._layersTreeNodeMap.push({node:a,treeId:b}),this._updateLayer(a),a.hasMixin(GNode.Container))for(var h=a.getFirstChild();null!==h;h=h.getNext())(h instanceof GLayer||h instanceof GItem)&&this._insertLayer(h);var i=this._getLayerTreeNode(a);a instanceof GItem&&a.hasFlag(GNode.Flag.Selected)&&this._layersTree.tree("selectNode",i),a.hasFlag(GNode.Flag.Expanded)&&this._layersTree.tree("openNode",i,!1)},b.prototype._updateLayer=function(a){var b=this._getLayerTreeNode(a);if(b){var c=a.getLabel();this._layersTree.tree("updateNode",b,c)}},b.prototype._removeLayer=function(a){var b=this._getLayerTreeNode(a);b&&(this._layersTree.tree("removeNode",b),a.accept(function(a){if(a instanceof GLayer||a instanceof GItem)for(var b=0;b<this._layersTreeNodeMap.length;++b)if(this._layersTreeNodeMap[b].node===a){this._layersTreeNodeMap.splice(b,1);break}}.bind(this)))},b.prototype._afterNodeInsert=function(a){if(a.node instanceof GLayer||a.node instanceof GItem){var b=this._document.getScene().getActivePage();a.node.getPage()===b&&this._insertLayer(a.node)}},b.prototype._beforeNodeRemove=function(a){if(a.node instanceof GLayer||a.node instanceof GItem){this._removeLayer(a.node);var b=a.node.getParent();if(b instanceof GLayer||b instanceof GItem){for(var c=!1,d=b.getFirstChild();null!==d;d=d.getNext())if((d instanceof GLayer||d instanceof GItem)&&d!==a.node){c=!0;break}c||(b.removeFlag(GNode.Flag.Expanded),this._updateLayer(b))}}},b.prototype._afterPropertiesChange=function(a){(a.node instanceof GLayer||a.node instanceof GItem)&&this._updateLayer(a.node)},b.prototype._afterFlagChange=function(a){a.node instanceof GPage&&a.flag===GNode.Flag.Active&&a.set?this._clear():a.node instanceof GLayer&&(a.flag===GNode.Flag.Active||a.flag===GNode.Flag.Selected||a.flag===GNode.Flag.Expanded)?this._updateLayer(a.node):a.node instanceof GItem&&a.flag===GNode.Flag.Selected?this._updateLayer(a.node):!(a.node instanceof GLayer||a.node instanceof GItem)||a.flag!==GElement.Flag.Hidden&&a.flag!==GElement.Flag.Locked||this._updateLayer(a.node)},b.prototype._clickLayerTreeNode=function(a){a.node.layerOrItem&&(a.node.layerOrItem instanceof GLayer?this._document.getScene().setActiveLayer(a.node.layerOrItem):a.node.layerOrItem instanceof GItem&&(ifPlatform.modifiers.shiftKey||!a.node.layerOrItem.hasFlag(GNode.Flag.Selected)?this._document.getEditor().updateSelection(ifPlatform.modifiers.shiftKey,[a.node.layerOrItem]):a.node.layerOrItem.hasFlag(GNode.Flag.Selected)&&this._document.getEditor().clearSelection([a.node.layerOrItem])))},b.prototype._createLayerTreeItem=function(a,b){if(a.layerOrItem){for(var c=a.layerOrItem,d=0,e=!1,f=!1,g=!1,h=c.getParent();null!==h&&!(h instanceof GPage);h=h.getParent())e=h.getProperty("visible")===!1||e,f=h.getProperty("locked")===!0||f,h instanceof GLayer&&(g=h.getProperty("otl")===!0||g),d+=1;var i=e||c.getProperty("visible")===!1,j=f||c.getProperty("locked")===!0,k=g||c instanceof GLayer&&c.getProperty("otl"),l=b.find("div.jqtree-element"),m=l.find("> .jqtree-title");l.toggleClass("g-active",c.hasFlag(GNode.Flag.Active)).toggleClass("g-selected",c.hasFlag(GNode.Flag.Selected)).gAutoEdit({selector:"> .jqtree-title"}).on("submitvalue",function(a,b){b&&""!==b.trim()&&GEditor.tryRunTransaction(c,function(){c.setProperty("name",b)},"Rename Layer/Item")});for(var n=0;d>n;++n)$("<span></span>").addClass("layer-spacer").prependTo(l);var o=null;if(c instanceof GLayer?o=c.hasFlag(GNode.Flag.Expanded)?"folder-open":"folder":c instanceof GSlice?o="crop":c instanceof GShape&&(c instanceof GText?o="font":c instanceof GImage?o="image":c instanceof GEllipse?o="circle":c instanceof GRectangle?o="stop":c instanceof GPath||c instanceof GCompoundPath?o="pencil":c instanceof GPolygon&&(o="star")),o&&$("<span></span>").addClass("layer-icon fa fa-"+o).insertBefore(m),$("<span></span>").addClass("layer-lock fa fa-fw fa-"+(j?"lock":"unlock")).toggleClass("layer-default",!j).attr("title","Toggle Lock").on("click",function(a){a.stopPropagation(),f||GEditor.tryRunTransaction(c,function(){c.setProperty("locked",!c.getProperty("locked"))},"Toggle Layer Locked")}).prependTo(l),$("<span></span>").addClass("layer-visibility fa fa-"+(i?"eye-slash":"eye")).toggleClass("layer-default",!i).attr("title","Toggle Visibility").on("click",function(a){if(a.stopPropagation(),!e){var b=!c.getProperty("visible");b||c.removeFlag(GNode.Flag.Highlighted),GEditor.tryRunTransaction(c,function(){c.setProperty("visible",b)},"Toggle Layer Visibility"),b&&c.setFlag(GNode.Flag.Highlighted)}}).on("mouseenter",function(){c.hasFlag(GElement.Flag.Hidden)||c.setFlag(GNode.Flag.Highlighted)}).on("mouseleave",function(){c.hasFlag(GElement.Flag.Hidden)||c.removeFlag(GNode.Flag.Highlighted)}).prependTo(l),c instanceof GLayer){l.attr("data-layer-type",c.getProperty("tp")),c.getProperty("tp")!==GLayer.Type.Guide&&$("<span></span>").addClass("layer-outline fa fa-"+(k?"circle-o":"circle")).toggleClass("layer-default",!k).attr("title","Toggle Outline").on("click",function(a){a.stopPropagation(),e||GEditor.tryRunTransaction(c,function(){c.setProperty("otl",!c.getProperty("otl"))},"Toggle Layer Outline")}).appendTo(l);var p=function(a,b){GEditor.tryRunTransaction(c,function(){var a=c.getProperty("cls");c.setProperty("cls",b),c.acceptChildren(function(c){if(c instanceof GLayer){var d=c.getProperty("cls");GUtil.equals(d,a)&&c.setProperty("cls",b)}})},"Change Layer Color")};$("<span></span>").addClass("layer-color").gPatternTarget().gPatternTarget("types",[GColor]).gPatternTarget("value",c.getProperty("cls")).css("background",GPattern.asCSSBackground(c.getProperty("cls"))).on("click",function(a){a.stopPropagation();var b=$(a.target);$.gPatternPicker.open({target:b,scene:this._document.getScene(),types:[GColor],value:b.gPatternTarget("value"),changeCallback:p})}.bind(this)).on("patternchange",p).appendTo(l)}}},b.prototype._canMoveLayerTreeNode=function(a,b,c){return null!==this._getLayerTreeNodeMoveInfo(c,a.layerOrItem,b.layerOrItem)},b.prototype._moveLayerTreeNode=function(a){a.preventDefault();var b=this._getLayerTreeNodeMoveInfo(a.move_info.position,a.move_info.moved_node.layerOrItem,a.move_info.target_node.layerOrItem);b&&GEditor.tryRunTransaction(this._document.getScene(),function(){b.source.getParent().removeChild(b.source),b.parent.insertChild(b.source,b.before);for(var a=null,c=b.parent;null!==c&&!(c instanceof GPage);c=c.getParent())c.setFlag(GNode.Flag.Expanded),a=c;this._updateLayer(a)}.bind(this),"Move Layer/Item")},b.prototype._getLayerTreeNodeMoveInfo=function(a,b,c){if(c=c||this._document.getScene().getActivePage(),b&&c&&"none"!==a){var d=null,e=null;if("inside"===a?(d=c,e=null):"after"==a&&(d=c.getParent(),e=c),e===b)return null;if(b.validateInsertion(d,e))return{parent:d,before:e,source:b}}return null},b.prototype._getLayerTreeNodeId=function(a){if(this._layersTreeNodeMap)for(var b=0;b<this._layersTreeNodeMap.length;++b)if(this._layersTreeNodeMap[b].node===a)return this._layersTreeNodeMap[b].treeId},b.prototype._getLayerTreeNode=function(a){return this._layersTree.tree("getNodeById",this._getLayerTreeNodeId(a))},b.prototype.toString=function(){return"[Object GLayersPalette]"},a.GLayersPalette=b}(this),function(a){function b(a){if(d){var b=$(a).data("page");if(b&&(b!==d||ifPlatform.modifiers.shiftKey))return d.getParent()===b.getParent()}return!1}function c(){GPalette.call(this)}var d=null;GObject.inherit(c,GPalette),c.ID="pages",c.TITLE=new GLocale.Key(c,"title"),c.prototype._document=null,c.prototype._pagesPanel=null,c.prototype._pageAddControl=null,c.prototype._pageDeleteControl=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getGroup=function(){return"structure"},c.prototype.isEnabled=function(){return null!==this._document},c.prototype.init=function(a,b){GPalette.prototype.init.call(this,a,b),this._pagesPanel=$("<div></div>").addClass("g-grid pages").appendTo(a),this._pageAddControl=$("<button></button>").attr("title","Add Page").on("click",function(){gApp.executeAction(GAddPageAction.ID)}.bind(this)).append($("<span></span>").addClass("fa fa-plus")).appendTo(b),this._pageDeleteControl=$("<button></button>").attr("title","Delete Page").on("click",function(){gApp.executeAction(GDeletePageAction.ID)}.bind(this)).append($("<span></span>").addClass("fa fa-trash-o")).appendTo(b)},c.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene();b.addEventListener(GNode.AfterInsertEvent,this._afterNodeInsert,this),b.addEventListener(GNode.BeforeRemoveEvent,this._beforeNodeRemove,this),b.addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),b.addEventListener(GNode.AfterFlagChangeEvent,this._afterFlagChange,this),b.addEventListener(GScene.ReferenceEvent,this._referenceEvent,this),this._clear(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene();this._document=null,b.removeEventListener(GNode.AfterInsertEvent,this._afterNodeInsert,this),b.removeEventListener(GNode.BeforeRemoveEvent,this._beforeNodeRemove,this),b.removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),b.removeEventListener(GNode.AfterFlagChangeEvent,this._afterFlagChange,this),b.removeEventListener(GScene.ReferenceEvent,this._referenceEvent,this),this._clear(),this.trigger(GPalette.UPDATE_EVENT)}},c.prototype._clear=function(){if(this._pagesPanel.empty(),this._document)for(var a=this._document.getScene(),b=a.getFirstChild();null!==b;b=b.getNext())b instanceof GPage&&this._insertPage(b)},c.prototype._insertPage=function(a){var c=null;a.getNext()&&this._pagesPanel.find(".page-block").each(function(b,d){var e=$(d);return e.data("page")===a.getNext()?(c=e,!1):void 0});var e=$("<div></div>").addClass("page-block").data("page",a).attr("draggable","true").append($("<div></div>").addClass("page-visibility grid-icon grid-border").attr("title","Toggle Page Visibility").on("click",function(b){b.stopPropagation(),GEditor.tryRunTransaction(a,function(){a.setProperty("visible",!a.getProperty("visible"))},"Toggle Page Visibility")}).append($("<span></span>").addClass("fa fa-fw"))).append($("<div></div>").addClass("page-lock grid-icon grid-border").attr("title","Toggle Page Lock").on("click",function(b){b.stopPropagation(),GEditor.tryRunTransaction(a,function(){a.setProperty("locked",!a.getProperty("locked"))},"Toggle Page Lock")}).append($("<span></span>").addClass("fa fa-fw"))).append($("<div></div>").addClass("page-name grid-main").gAutoEdit({}).on("submitvalue",function(b,c){c&&""!==c.trim()&&GEditor.tryRunTransaction(a,function(){a.setProperty("name",c)},"Rename Page")})).append($("<div></div>").addClass("page-master").append($("<span></span>").addClass("fa fa-fw"))).on("mousedown",function(){}).on("click",function(){a.getScene().setActivePage(a)}).on("dragstart",function(a){var c=$(this),e=a.originalEvent;e.stopPropagation(),d=c.data("page"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","dummy_data"),c.closest(".pages").find(".page-block").each(function(a,c){$(c).append($("<div></div>").addClass("grid-drag-overlay").on("dragenter",function(){b(this.parentNode)&&$(this).parent().addClass("g-drop")}).on("dragleave",function(){b(this.parentNode)&&$(this).parent().removeClass("g-drop")}).on("dragover",function(a){var c=a.originalEvent;b(this.parentNode)&&(c.preventDefault(),c.stopPropagation(),c.dataTransfer.dropEffect="move")}).on("drop",function(){var a=($(this),$(this.parentNode));a.removeClass("g-drop"),a.closest(".pages").find(".grid-drag-overlay").remove();var b=a.data("page");if(d&&d.getParent()===b.getParent()){var c=d.getParent(),e=c.getIndexOfChild(d),f=c.getIndexOfChild(b);GEditor.tryRunTransaction(c,function(){if(ifPlatform.modifiers.shiftKey){var a=d.getScene().getPageInsertPosition(),g=d.clone();g.setProperties(["x","y","name"],[a.getX(),a.getY(),g.getProperty("name")+"-copy"]),c.insertChild(g,f>e?b.getNext():b)}else c.removeChild(d),c.insertChild(d,f>e?b.getNext():b)},ifPlatform.modifiers.shiftKey?"Duplicate Page":"Move Page")}}))})}).on("dragend",function(a){var b=$(this),c=a.originalEvent;c.stopPropagation(),b.closest(".pages").find(".grid-drag-overlay").remove(),d=null});c&&c.length>0?e.insertBefore(c):e.appendTo(this._pagesPanel),this._updatePage(a)},c.prototype._updatePage=function(a){var b=a.getProperty("visible"),c=a.getProperty("locked");this._pagesPanel.find(".page-block").each(function(d,e){var f=$(e);if(f.data("page")===a){f.toggleClass("g-active",a.hasFlag(GNode.Flag.Active)),f.toggleClass("g-selected",a.hasFlag(GNode.Flag.Selected)),f.find(".page-visibility").toggleClass("grid-icon-default",b).find("> span").toggleClass("fa-eye",b).toggleClass("fa-eye-slash",!b),f.find(".page-lock").toggleClass("grid-icon-default",!c).find("> span").toggleClass("fa-lock",c).toggleClass("fa-unlock",!c),f.find(".page-name").text(a.getProperty("name"));var g=a.getScene().linkCount(a),h=a.getMasterPage(),i="";return g&&(i="Master of "+g.toString()+" pages:",a.getScene().visitLinks(a,function(a){i+="\n"+a.getLabel()})),h&&(""!==i&&(i+="\n\n"),i+="Slave of "+h.getLabel()),f.find(".page-master").css("display",h||g>0?"":"none").find("> span").attr("title",i).toggleClass("fa-link",!!h&&0===g).toggleClass("fa-crosshairs",g>0),!1}})},c.prototype._removePage=function(a){this._pagesPanel.find(".page-block").each(function(b,c){var d=$(c);return d.data("page")===a?(d.remove(),!1):void 0})},c.prototype._afterNodeInsert=function(a){a.node instanceof GPage&&this._insertPage(a.node)},c.prototype._beforeNodeRemove=function(a){a.node instanceof GPage&&this._removePage(a.node)},c.prototype._afterPropertiesChange=function(a){a.node instanceof GPage&&this._updatePage(a.node)},c.prototype._afterFlagChange=function(a){a.node instanceof GPage&&(a.flag===GNode.Flag.Active||a.flag===GNode.Flag.Selected)&&this._pagesPanel.find(".page-block").each(function(b,c){var d=$(c);d.data("page")===a.node&&d.toggleClass(a.flag===GNode.Flag.Active?"g-active":"g-selected",a.set)})},c.prototype._referenceEvent=function(a){a.reference instanceof GPage&&this._updatePage(a.reference)},c.prototype.toString=function(){return"[Object GPagesPalette]"},a.GPagesPalette=c}(this),function(a){function b(){GPalette.call(this)}GObject.inherit(b,GPalette),b.ID="styles",b.TITLE=new GLocale.Key(b,"title"),b.prototype._htmlElement=null,b.prototype._controls=null,b.prototype._document=null,b.prototype._stylePanel=null,b.prototype._styleSettingsControl=null,b.prototype._styleDeleteControl=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"assets"},b.prototype.isEnabled=function(){return null!==this._document},b.prototype.init=function(a,b){GPalette.prototype.init.call(this,a,b),this._htmlElement=a,this._controls=b,this._stylePanel=$("<div></div>").addClass("g-list styles g-style-list").gStylePanel({allowNameEdit:!0}).on("stylechange",function(a,b){this._document.getScene().getStyleCollection().acceptChildren(function(a){a.removeFlag(GNode.Flag.Selected)}),b&&b.setFlag(GNode.Flag.Selected),this._updateControls()}.bind(this)).appendTo(a),this._styleSettingsControl=$("<button></button>").attr("title","Edit Style Settings").on("click",function(){var a=this._stylePanel.gStylePanel("value");new GStyleDialog(a).open(function(b,c){b&&GEditor.tryRunTransaction(a,function(){c()}.bind(this),"Change Style Settings")}.bind(this))}.bind(this)).append($("<span></span>").addClass("fa fa-cog")).appendTo(b),this._styleDeleteControl=$("<button></button>").attr("title","Delete Selected Style").on("click",function(){var a=this._stylePanel.gStylePanel("value");vex.dialog.confirm({message:"Are you sure you want to delete the selected style?",callback:function(b){b&&GEditor.tryRunTransaction(a,function(){a.disconnectStyle(),a.getParent().removeChild(a)},"Delete Style")}.bind(this)})}.bind(this)).append($("<span></span>").addClass("fa fa-trash-o")).appendTo(b),this._updateControls()},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene();this._stylePanel.gStylePanel("attach",b.getStyleCollection()),this._stylePanel.gStylePanel("value",b.getStyleCollection().querySingle("style:selected")),this._updateControls(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene();this._document=null,this._stylePanel.gStylePanel("detach"),this._updateControls(),this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._updateControls=function(){var a=this._stylePanel.gStylePanel("value");this._styleSettingsControl.prop("disabled",!a||null!==a.getProperty("_sdf")),this._styleDeleteControl.prop("disabled",!a||null!==a.getProperty("_sdf"))},b.prototype.toString=function(){return"[Object GStylesPalette]"},a.GStylesPalette=b}(this),function(a){function b(){GPalette.call(this)}GObject.inherit(b,GPalette),b.ID="swatches",b.TITLE=new GLocale.Key(b,"title"),b.prototype._document=null,b.prototype._swatchPanel=null,b.prototype._swatchImportControl=null,b.prototype._swatchDeleteControl=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"assets"},b.prototype.isEnabled=function(){return null!==this._document},b.prototype.init=function(a,b){GPalette.prototype.init.call(this,a,b);var c=this,d=$("<input>").attr("type","file").attr("accept",".ase").css({position:"absolute",left:"-10000px"}).on("change",function(a){var b=$(a.target)[0].files;b&&b.length&&GIO.read("application/x-adobe-ase",b[0],function(a){if(a&&a.colors)for(var b=c._document.getScene().getSwatchCollection(),d=0;d<a.colors.length;++d){var e=a.colors[d],f=null;if("RGB"===e.model?f=new GRGBColor([255*e.color[0],255*e.color[1],255*e.color[2]]):"CMYK"===e.model&&(f=new GCMYKColor(e.color)),f){var g=new GSwatch;g.setProperties(["name","pat"],[e.name,f]),b.appendChild(g)}}}),$(a.target).val("")}).appendTo(a);this._swatchPanel=$("<div></div>").addClass("g-list swatches").gSwatchPanel({allowNameEdit:!0,placeholder:"Drop Swatches here"}).on("swatchchange",function(a,b){this._document.getScene().getSwatchCollection().acceptChildren(function(a){a.removeFlag(GNode.Flag.Selected)}),b&&b.setFlag(GNode.Flag.Selected),this._updateControls()}.bind(this)).appendTo(a),this._swatchImportControl=$("<button></button>").attr("title","Import swatches").attr("data-action","import").on("click",function(){d.focus().trigger("click")}.bind(this)).append($("<span></span>").addClass("fa fa-folder-open-o")).appendTo(b),this._swatchDeleteControl=$("<button></button>").attr("title","Delete Selected Swatch").attr("data-action","delete").on("click",function(){var a=this._swatchPanel.gSwatchPanel("value"),b=this._document.getEditor();b.beginTransaction();try{a.getParent().removeChild(a)}finally{b.commitTransaction("Delete Swatch")}}.bind(this)).append($("<span></span>").addClass("fa fa-trash-o")).appendTo(b),this._updateControls()},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene();this._swatchPanel.gSwatchPanel("attach",b.getSwatchCollection()),this._swatchPanel.gSwatchPanel("value",b.getSwatchCollection().querySingle("swatch:selected")),this._updateControls(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene();this._document=null,this._swatchPanel.gSwatchPanel("detach"),this._updateControls(),this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._updateControls=function(){var a=this._swatchPanel.gSwatchPanel("value");this._swatchDeleteControl.prop("disabled",!a)},b.prototype.toString=function(){return"[Object GSwatchesPalette]"},a.GSwatchesPalette=b}(this),function(a){function b(){GPalette.call(this),this._savedValues={Move:[0,0],Scale:[100,100],Rotate:[0],Skew:[0,0],Reflect:[0]}}GObject.inherit(b,GPalette),b.ID="transform",b.TITLE=new GLocale.Key(b,"title"),b._TransformMode={Move:{label1:{prefix:"X"},label2:{prefix:"Y"},pivot:!1,transformFunc:function(a,b,c){var d=c.stringToPoint(a)||0,e=c.stringToPoint(b)||0;return 0!==d||0!==e?function(a,b){b.transform(new GTransform(1,0,0,1,d*a,e*a))}:null}},Scale:{label1:{prefix:"W",postfix:"%"},label2:{prefix:"H",postfix:"%"},pivot:!0,transformFunc:function(a,b){var c=parseFloat(a)/100||1,d=parseFloat(b)/100||1;return 1!==c||1!==d?function(a,b,e){b.transform((new GTransform).translated(-e.getX(),-e.getY()).scaled(c+(c-1)*(a-1),d+(d-1)*(a-1)).translated(e.getX(),e.getY()))}:null}},Rotate:{label1:{prefix:"Angle",postfix:"°"},pivot:!0,transformFunc:function(a){var b=GMath.toRadians(parseFloat(a))||0;return 0!==b?function(a,c,d){c.transform((new GTransform).translated(-d.getX(),-d.getY()).rotated(-b*a).translated(d.getX(),d.getY()))}:null}},Skew:{label1:{prefix:"X",postfix:"°"},label2:{prefix:"Y",postfix:"°"},pivot:!0,transformFunc:function(a,b){var c=GMath.toRadians(parseFloat(a))||0,d=GMath.toRadians(parseFloat(b))||0;return(0!==c||0!==d)&&c>-GMath.PIHALF&&d>-GMath.PIHALF&&c<GMath.PIHALF&&d<GMath.PIHALF?function(a,b,e){b.transform((new GTransform).translated(-e.getX(),-e.getY()).skewed(c*a,d*a).translated(e.getX(),e.getY()))}:null}},Reflect:{label1:{prefix:"Axis",postfix:"°"},pivot:!0,transformFunc:function(a){var b=parseFloat(a)||0;b=GMath.toRadians(-b);var c=Math.cos(b),d=Math.sin(b);return function(a,b,e){a%2&&b.transform((new GTransform).translated(-e.getX(),-e.getY()).multiplied(new GTransform(c,-d,d,c,0,0)).multiplied(new GTransform(1,0,0,-1,0,0)).multiplied(new GTransform(c,d,-d,c,0,0)).translated(e.getX(),e.getY()))}}}},b.prototype._htmlElement=null,b.prototype._document=null,b.prototype._elements=null,b.prototype._transformMode=null,b.prototype._savedValues=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getGroup=function(){return"modify"},b.prototype.isEnabled=function(){return null!==this._document&&this._elements&&this._elements.length>0},b.prototype.init=function(a,b){GPalette.prototype.init.call(this,a,b),this._htmlElement=a,a.css("height","95px").append($("<div></div>").css({position:"absolute",top:"5px",left:"5px"}).append($("<button></button>").addClass("g-flat").attr("title","Move").attr("data-mode","Move").append($("<span></span>").addClass("fa fa-arrows"))).append($("<button></button>").addClass("g-flat").attr("title","Scale").attr("data-mode","Scale").append($("<span></span>").addClass("fa fa-expand"))).append($("<button></button>").addClass("g-flat").attr("title","Rotate").attr("data-mode","Rotate").append($("<span></span>").addClass("fa fa-rotate-right"))).append($("<button></button>").addClass("g-flat").attr("title","Skew").attr("data-mode","Skew").append($("<span></span>").addClass("fa fa-eraser"))).append($("<button></button>").addClass("g-flat").attr("title","Reflect").attr("data-mode","Reflect").append($("<span></span>").addClass("fa fa-star-half-o"))).append($("<button></button>").css("margin-left","7px").text("Apply").on("click",this._apply.bind(this)))).append($("<label></label>").attr("data-value","1").css({position:"absolute",left:"5px",top:"30px"}).append($("<span></span>").attr("data-prefix","")).append($("<input>").css({"margin-left":"3px",width:"48px"}).val("0").on("keyup",function(a){13==a.keyCode&&this._apply()}.bind(this))).append($("<span></span>").attr("data-postfix",""))).append($("<label></label>").attr("data-value","2").css({position:"absolute",left:"90px",top:"30px"}).append($("<span></span>").attr("data-prefix","")).append($("<input>").css({"margin-left":"3px",width:"48px"}).val("0").on("keyup",function(a){13==a.keyCode&&this._apply()}.bind(this))).append($("<span></span>").attr("data-postfix",""))).append($("<div></div>").attr("data-property","pivot").css({position:"absolute",top:"65px",left:"5px"}).gPivot().gPivot("value",GRect.Side.CENTER)).append($("<label></label>").css({position:"absolute",top:"65px",right:"5px"}).text("Copies:").append($("<input>").css({"margin-left":"3px",width:"38px"}).attr("data-property","copies").val("0"))),a.find("button[data-mode]").each(function(a,b){var c=$(b);c.on("click",function(){this._setTransformMode(c.attr("data-mode"))}.bind(this))}.bind(this)),this._setTransformMode("Move")},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getEditor();b.addEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),this._updateFromSelection(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getEditor();b.removeEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),this._document=null,this._elements=null,this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._updateFromSelection=function(){this._elements=null;var a=this._document.getEditor().getSelection();if(a)for(var b=0;b<a.length;++b)a[b].hasMixin(GElement.Transform)&&(this._elements||(this._elements=[]),this._elements.push(a[b]));this.trigger(GPalette.UPDATE_EVENT)},b.prototype._setTransformMode=function(a){this._transformMode&&(this._savedValues[this._transformMode]=[this._htmlElement.find('label[data-value="1"] input').val(),this._htmlElement.find('label[data-value="2"] input').val()]),this._transformMode=a,this._htmlElement.find("button[data-mode]").each(function(b,c){var d=$(c);
d.toggleClass("g-active",d.attr("data-mode")===a)}.bind(this));var c=function(b,c){var d=this._htmlElement.find('label[data-value="'+c.toString()+'"]');b?(d.css("display",""),d.find("span[data-prefix]").text(b.prefix?b.prefix+":":""),d.find("span[data-postfix]").text(b.postfix?b.postfix:""),d.find("input").val(this._savedValues[a][c-1])):d.css("display","none")}.bind(this),d=b._TransformMode[a];c(d.label1,1),c(d.label2,2),this._htmlElement.find('[data-property="pivot"]').css("display",d.pivot?"":"none")},b.prototype._apply=function(){var a=this._document.getScene(),c=parseInt(this._htmlElement.find('[data-property="copies"]').val()),d=this._htmlElement.find('[data-property="pivot"]').gPivot("value"),e=this._htmlElement.find('label[data-value="1"] input').val(),f=this._htmlElement.find('label[data-value="2"] input').val(),g=b._TransformMode[this._transformMode].transformFunc(e,f,a);g&&GEditor.tryRunTransaction(a,function(){for(var a=[],b=null,e=0;e<this._elements.length;++e){var f=this._elements[e];d&&(b=b?b.united(f.getGeometryBBox()):f.getGeometryBBox());var h=[f];if(c>0)for(var i=f.getParent(),j=f.getNext()?f.getNext():null,k=0;c>k;++k){var l=f.clone();k==c-1&&(l.setFlag(GNode.Flag.Selected),f.removeFlag(GNode.Flag.Selected)),i.insertChild(l,j),h.push(l)}a.push(h)}var m=null;b&&!b.isEmpty()&&(m=b.getSide(d));for(var e=0;e<a.length;++e){var h=a[e];if(h.length>1)for(var n=0;n<h.length;++n)g(n,h[n],m);else 1==h.length&&g(1,h[0],m)}}.bind(this),"Apply Transformation")},b.prototype.toString=function(){return"[Object GTransformPalette]"},a.GTransformPalette=b}(this),function(a){function b(){GPanel.call(this),this._propertyPanels=[]}GObject.inherit(b,GPanel),b.ID="properties",b.TITLE=new GLocale.Key(b,"title"),b.prototype._htmlElement=null,b.prototype._propertyPanels=null,b.prototype._document=null,b.prototype._elements=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.init=function(a,b){GPanel.prototype.init.call(this,a,b),this._htmlElement=a;for(var c=$("<div></div>").addClass("properties-panels").appendTo(this._htmlElement),d=function(a){var b=$("<div></div>").css("display","none").addClass("properties-panel-content");a.init(b),b.appendTo(c),this._propertyPanels.push({panel:b,properties:a})}.bind(this),e=0;e<gravit.properties.length;++e)d(gravit.properties[e])},b.prototype.isEnabled=function(){return!!this._document},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene(),c=this._document.getEditor();c.addEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),b.addEventListener(GNode.AfterFlagChangeEvent,this._afterFlagChange,this),this._updateFromSelection(),this.trigger(GPanel.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene(),c=this._document.getEditor();c.removeEventListener(GEditor.SelectionChangedEvent,this._updateFromSelection,this),b.removeEventListener(GNode.AfterFlagChangeEvent,this._afterFlagChange,this),this._document=null,this._elements=null,this._updatePropertyPanels(),this.trigger(GPanel.UPDATE_EVENT)}},b.prototype._updateFromSelection=function(){if(this._elements=this._document.getEditor().getSelection(),!this._elements||0===this._elements.length){var a=this._document.getScene().getActivePage();a&&(this._elements=[a])}this._updatePropertyPanels()},b.prototype._afterFlagChange=function(a){a.flag===GNode.Flag.Active&&this._elements&&1===this._elements.length&&this._elements[0]instanceof GScene&&this._updatePropertyPanels()},b.prototype._updatePropertyPanels=function(){for(var a=0;a<this._propertyPanels.length;++a){var b=this._propertyPanels[a],c=this._elements&&0!==this._elements.length?b.properties.update(this._document,this._elements):!1;c?b.panel.css("display",""):b.panel.css("display","none")}},b.prototype.toString=function(){return"[Object GPropertiesPanel]"},a.GPropertiesPanel=b}(this),function(a){function b(){this._elements=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._effectsPanel=null,b.prototype.init=function(a){this._panel=a,this._effectsPanel=$("<div></div>").css({position:"absolute",top:"5px",left:"5px",right:"5px",bottom:"5px"}).gEffectPanel(),a.css("width","175px").append(this._effectsPanel)},b.prototype.update=function(a,b){this._document&&this._effectsPanel.gEffectPanel("elements",null);for(var c=[],d=0;d<b.length;++d)b[d].hasMixin(GStylable)&&b[d].getStylePropertySets().indexOf(GStylable.PropertySet.Effects)>=0&&c.push(b[d]);return c.length===b.length?(this._document=a,this._effectsPanel.gEffectPanel("elements",c),!0):!1},b.prototype.toString=function(){return"[Object GEffectProperties]"},a.GEffectProperties=b}(this),function(a){function b(){this._polygons=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._polygons=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("pts"===a)return $("<input>").attr("type","text").attr("data-property","pts").on("change",function(){var c=parseInt($(this).val());if(isNaN(c))b._updateProperties();else{var d=GMath.normalizeAngleRadians(b._polygons[0].getProperty("oa")+Math.PI/c);b._assignProperties([a,"ia"],[GMath.normalizeValue(c,2,360),d])}});if("evenodd"===a)return $("<input>").attr("type","checkbox").attr("data-property",a).on("change",function(){b._assignProperty(a,$(this).is(":checked"))});if("ir"===a||"or"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null!==c&&"number"==typeof c&&c>=0?b._assignProperty(a,c):b._updateProperties()});if("ia"===a||"oa"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=GLength.parseEquationValue($(this).val());null!==c?(c=GMath.normalizeAngleRadians(GMath.toRadians(c)),b._assignProperty(a,GMath.PI2-c)):b._updateProperties()});if("ict"===a||"oct"===a)return $("<button></button>").attr("data-property",a).gCornerTypePicker().on("cornertypechange",function(c,d){b._assignProperty(a,d)});if("icr"===a||"ocr"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null!==c&&"number"==typeof c&&c>=0?b._assignProperty(a,0>c?0:c):b._updateProperties()});throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","198px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).text("Points:").append(b("pts").css({"margin-left":"3px",width:"48px"}))).append($("<label></label>").css({position:"absolute",top:"5px",left:"101px"}).text("Even/odd Fill:").append(b("evenodd"))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).html('<span class="fa fa-stop" style="font-size:11px;transform:rotate(45deg)"></span>').append(b("or").css({"margin-left":"5px",width:"48px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"103px"}).html('<span class="fa fa-circle"></span>').append(b("ir").css({"margin-left":"3px",width:"48px"}))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<label></label>").css({position:"absolute",top:"65px",left:"5px"}).html('<span class="fa fa-rotate-right"></span>').append(b("oa").css({"margin-left":"5px",width:"48px"}))).append($("<label></label>").css({position:"absolute",top:"65px",left:"103px"}).html('<span class="fa fa-rotate-right" style="visibility: hidden"></span>').append(b("ia").css({"margin-left":"3px",width:"48px"}))).append($("<label></label>").css({position:"absolute",top:"90px",left:"5px"}).html('<span class="fa fa-square" style="visibility: hidden"></span>').append(b("oct").css({"margin-left":"5px"})).append(b("ocr").css("width","38px"))).append($("<label></label>").css({position:"absolute",top:"89px",left:"103px"}).html('<span class="fa fa-square" style="visibility: hidden"></span>').append(b("ict").css({"margin-left":"3px"})).append(b("icr").css("width","38px")))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._polygons=[];for(var c=0;c<b.length;++c)b[c]instanceof GPolygon&&this._polygons.push(b[c]);return this._polygons.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._polygons.length>0&&this._polygons[0]===a.node&&this._updateProperties()},b.prototype._updateProperties=function(){var a=this._polygons[0];this._panel.find('input[data-property="pts"]').val(a.getProperty("pts")),this._panel.find('input[data-property="evenodd"]').prop("checked",a.getProperty("evenodd")),this._panel.find('input[data-property="or"]').val(this._document.getScene().pointToString(a.getProperty("or"))),this._panel.find('input[data-property="ir"]').val(this._document.getScene().pointToString(a.getProperty("ir"))),this._panel.find('input[data-property="oa"]').val(GUtil.formatNumber(GMath.toDegrees(GMath.PI2-a.getProperty("oa")),2)),this._panel.find('input[data-property="ia"]').val(GUtil.formatNumber(GMath.toDegrees(GMath.PI2-a.getProperty("ia")),2)),this._panel.find('button[data-property="oct"]').gCornerTypePicker("value",a.getProperty("oct")),this._panel.find('button[data-property="ict"]').gCornerTypePicker("value",a.getProperty("ict")),this._panel.find('input[data-property="ocr"]').val(this._document.getScene().pointToString(a.getProperty("ocr"))),this._panel.find('input[data-property="icr"]').val(this._document.getScene().pointToString(a.getProperty("icr")))},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._polygons.length;++d)this._polygons[d].setProperties(a,b)}finally{c.commitTransaction("Modify Polygon Properties")}},b.prototype.toString=function(){return"[Object GPolygonProperties]"},a.GPolygonProperties=b}(this),function(a){function b(){this._pathes=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._pathes=null,b.prototype._points=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("evenodd"===a||"closed"===a)return $("<input>").attr("type","checkbox").attr("data-path-property",a).on("change",function(){b._assignPathProperty(a,$(this).is(":checked"))});throw new Error("Unknown input property: "+a)}.bind(this),c=function(a){var b=this;if("x"===a||"y"===a||"cl"===a||"cr"===a)return $("<input>").attr("type","text").attr("data-point-property",a).on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null!==c&&"number"==typeof c&&c>=0?b._assignPointProperty(a,c):b._updatePointProperties()});if("tp"===a)return $("<select></select>").attr("data-point-property",a).append($("<option></option>").attr("value",GPathBase.AnchorPoint.Type.Symmetric).text("Symmetric")).append($("<option></option>").attr("value",GPathBase.AnchorPoint.Type.Asymmetric).text("Asymmetric")).append($("<option></option>").attr("value",GPathBase.AnchorPoint.Type.Mirror).text("Mirror")).append($("<option></option>").attr("value",GPathBase.AnchorPoint.Type.Connector).text("Connector")).append($("<option></option>").attr("value","-").text("Corner")).on("change",function(){var a=$(this).val(),c=a;"-"===a&&(c=GPathBase.CornerType.Rounded),b._assignPointProperty("tp",c)});if("ctp"===a)return $("<button></button>").attr("data-point-property",a).gCornerTypePicker().on("cornertypechange",function(a,c){b._assignPointProperty("tp",c)});if("ah"===a)return $("<input>").attr("type","checkbox").attr("data-point-property",a).on("change",function(){b._assignPointProperty(a,$(this).is(":checked"))});if("cu"===a)return $("<button></button>").addClass("g-flat").attr("data-point-property",a).on("click",function(){b._assignPointProperty(a,!$(this).hasClass("g-active")),b._updatePointProperties()}).append($("<span></span>").addClass("fa fa-lock").css("font-size","10px"));throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","198px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).text("Closed:").append(b("closed"))).append($("<label></label>").css({position:"absolute",top:"5px",left:"75px"}).text("Even/odd Fill:").append(b("evenodd"))).append($("<label></label>").attr("data-point-property","_row").css({position:"absolute",top:"30px",left:"5px"}).text("X:").append(c("x").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").attr("data-point-property","_row").css({position:"absolute",top:"30px",left:"65px"}).text("Y:").append(c("y").css({"margin-left":"3px",width:"38px"}))).append($("<div></div>").attr("data-point-property","_row").css({position:"absolute",top:"30px",left:"125px"}).append($("<button></button>").attr("title","Clear Left Handle").on("click",function(){this._assignPointProperties(["hlx","hly"],[null,null])}.bind(this)).append($("<span></span>").addClass("fa fa-forward"))).append($("<button></button>").attr("title","Clear Right Handle").on("click",function(){this._assignPointProperties(["hrx","hry"],[null,null])}.bind(this)).append($("<span></span>").addClass("fa fa-backward"))).append($("<button></button>").attr("title","Clear Handles").on("click",function(){this._assignPointProperties(["hlx","hly","hrx","hry"],[null,null,null,null])}.bind(this)).append($("<span></span>").addClass("fa fa-times")))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<label></label>").attr("data-point-property","_row").css({position:"absolute",top:"65px",left:"5px"}).append(c("tp").css("width","105px"))).append($("<label></label>").attr("data-point-property","_row").css({position:"absolute",top:"65px",right:"5px","text-align":"center"}).text("Auto Handles:").append("<br/>").append(c("ah"))).append($("<div></div>").attr("data-point-property","_row").css({position:"absolute",top:"89px",left:"5px"}).append(c("ctp")).append(c("cl").css("width","30px").attr("title","Left Smoothness")).append(c("cu").attr("title","Toggle Lock of Left & Right Smoothness")).append(c("cr").css("width","30px").attr("title","Right Smoothness")))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document.getScene().removeEventListener(GElement.AfterFlagChangeEvent,this._afterFlagChange),this._document=null),this._pathes=[],this._points=[];for(var c=0;c<b.length;++c)if(b[c]instanceof GPath){var d=b[c];this._pathes.push(b[c]);for(var e=d.getAnchorPoints().getFirstChild();null!==e;e=e.getNext())e.hasFlag(GNode.Flag.Selected)&&this._points.push(e)}return this._pathes.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(GElement.AfterFlagChangeEvent,this._afterFlagChange,this),this._updatePathProperties(),this._updatePointProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._pathes.length>0&&this._pathes[0]===a.node&&this._updatePathProperties(),this._points.length>0&&this._points[0]===a.node&&this._updatePointProperties()},b.prototype._afterFlagChange=function(a){if(a.flag===GNode.Flag.Selected&&a.node instanceof GPathBase.AnchorPoint){var b=a.node.getParent().getParent();b&&this._pathes.indexOf(b)>=0&&(a.set?this._points.push(a.node):this._points.splice(this._points.indexOf(a.node),1),this._updatePointProperties())}},b.prototype._updatePathProperties=function(){var a=this._pathes[0];this._panel.find('input[data-path-property="evenodd"]').prop("checked",a.getProperty("evenodd")),this._panel.find('input[data-path-property="closed"]').prop("checked",a.getProperty("closed"))},b.prototype._updatePointProperties=function(){var a=this._points.length>0?this._points[0]:null;if(a){this._panel.find("[data-point-property]").css("visibility",""),this._panel.find('input[data-point-property="x"]').val(this._document.getScene().pointToString(a.getProperty("x"))),this._panel.find('input[data-point-property="y"]').val(this._document.getScene().pointToString(a.getProperty("y"))),this._panel.find('input[data-point-property="ah"]').prop("checked",a.getProperty("ah"));var b=!0,c=a.getProperty("tp");for(var d in GPathBase.AnchorPoint.Type)if(GPathBase.AnchorPoint.Type[d]===c){b=!1;break}this._panel.find('select[data-point-property="tp"]').val(b?"-":c),this._panel.find('button[data-point-property="ctp"]').prop("disabled",!b).gCornerTypePicker("value",b?c:GPathBase.CornerType.Rounded),this._panel.find('input[data-point-property="cl"]').prop("disabled",!b).val(this._document.getScene().pointToString(a.getProperty("cl"))),this._panel.find('input[data-point-property="cr"]').prop("disabled",!b||a.getProperty("cu")).val(this._document.getScene().pointToString(a.getProperty("cr"))),this._panel.find('button[data-point-property="cu"]').prop("disabled",!b).toggleClass("g-active",a.getProperty("cu"))}else this._panel.find("[data-point-property]").css("visibility","hidden")},b.prototype._assignPathProperty=function(a,b){this._assignPathProperties([a],[b])},b.prototype._assignPathProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._pathes.length;++d)this._pathes[d].setProperties(a,b)}finally{c.commitTransaction("Modify Path Properties")}},b.prototype._assignPointProperty=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._points.length;++d){var e=this._points[d];if("x"===a){var f=b-e.getProperty("x"),g=e.getProperty("hlx")?e.getProperty("hlx")+f:null,h=e.getProperty("hrx")?e.getProperty("hrx")+f:null;e.setProperties(["x","hlx","hrx"],[b,g,h])}else if("y"===a){var i=b-e.getProperty("y"),j=e.getProperty("hly")?e.getProperty("hly")+i:null,k=e.getProperty("hry")?e.getProperty("hry")+i:null;e.setProperties(["y","hly","hry"],[b,j,k])}else e.setProperties([a],[b])}}finally{c.commitTransaction("Modify Point Properties")}},b.prototype._assignPointProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._points.length;++d)this._points[d].setProperties(a,b)}finally{c.commitTransaction("Modify Point Properties")}},b.prototype.toString=function(){return"[Object GPathProperties]"},a.GPathProperties=b}(this),function(a){function b(){this._rectangles=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._rectangles=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("uf"===a)return $("<input>").attr("type","checkbox").attr("data-property",a).on("change",function(){b._assignProperty("uf",$(this).is(":checked")),b._updateCornerProperties()});if("tl_sx"===a||"tl_sy"===a||"tr_sx"===a||"tr_sy"===a||"bl_sx"===a||"bl_sy"===a||"br_sx"===a||"br_sy"===a)return $("<input>").attr("type","text").attr("data-property",a).css("width","48px").on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null!==c&&"number"==typeof c&&c>=0?b._assignProperty(a,c):b._updateCornerProperties()});if("tl_ct"===a||"tr_ct"===a||"bl_ct"===a||"br_ct"===a)return $("<button></butto>").attr("data-property",a).css("width","32px").gCornerTypePicker().on("cornertypechange",function(c,d){b._assignProperty(a,d)});if("tl_uf"===a||"tr_uf"===a||"bl_uf"===a||"br_uf"===a)return $("<button></button>").addClass("g-flat").css("width","32px").attr("data-property",a).on("click",function(){b._assignProperty(a,!$(this).hasClass("g-active")),b._updateCornerProperties()}).append($("<span></span>").addClass("fa fa-lock fa-fw"));throw new Error("Unknown input property: "+a)}.bind(this),c="Uniform Corner-Smoothness",d="Horizontal Corner-Smoothness",e="Vertical Corner-Smoothness",f="Corner-Type";a.css("width","180px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).text("Uniform Corners:").append(b("uf"))).append($("<div></div>").css({position:"absolute",top:"30px",left:"5px"}).append(b("tl_ct").attr("title",c)).append(b("tl_sx").attr("title",d)).append(b("tr_sx").attr("title",d)).append(b("tr_ct").attr("title",c))).append($("<div></div>").css({position:"absolute",top:"53px",left:"5px"}).append(b("tl_sy").attr("title",e)).append(b("tl_uf").attr("title",f)).append(b("tr_uf").attr("title",f)).append(b("tr_sy").attr("title",e))).append($("<div></div>").css({position:"absolute",top:"76px",left:"5px"}).append(b("bl_sy").attr("title",e)).append(b("bl_uf").attr("title",f)).append(b("br_uf").attr("title",f)).append(b("br_sy").attr("title",e))).append($("<div></div>").css({position:"absolute",top:"99px",left:"5px"}).append(b("bl_ct").attr("title",c)).append(b("bl_sx").attr("title",d)).append(b("br_sx").attr("title",d)).append(b("br_ct").attr("title",c)))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._rectangles=[];for(var c=0;c<b.length;++c)b[c]instanceof GRectangle&&this._rectangles.push(b[c]);return this._rectangles.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._rectangles.length>0&&this._rectangles[0]===a.node&&this._updateProperties()},b.prototype._updateProperties=function(){this._updateCornerProperties()},b.prototype._updateCornerProperties=function(){var a=this._rectangles[0],b=a.getProperty("uf"),c=function(c){for(var d=0;d<c.length;++d){var e=c[d],f=this._panel.find('button[data-property="'+e+'_uf"]'),g=this._panel.find('input[data-property="'+e+'_sx"]'),h=this._panel.find('input[data-property="'+e+'_sy"]'),i=this._panel.find('button[data-property="'+e+'_ct"]'),j=b&&"tl"!==e;f.css("visibility",j?"hidden":"visible"),g.css("visibility",j?"hidden":"visible"),h.css("visibility",j?"hidden":"visible"),i.css("visibility",j?"hidden":"visible"),j||(g.val(this._document.getScene().pointToString(a.getProperty(e+"_sx"))),h.val(this._document.getScene().pointToString(a.getProperty(e+"_sy"))),a.getProperty(e+"_uf")?(f.addClass("g-active"),h.prop("disabled",!0)):(f.removeClass("g-active"),h.prop("disabled",!1)),f.prop("disabled",b),i.gCornerTypePicker("value",a.getProperty(e+"_ct")))}}.bind(this);this._panel.find('input[data-property="uf"]').prop("checked",b),c(["tl","tr","bl","br"])},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._rectangles.length;++d)this._rectangles[d].setProperties(a,b)}finally{c.commitTransaction("Modify Rectangle Properties")}},b.prototype.toString=function(){return"[Object GRectangleProperties]"},a.GRectangleProperties=b}(this),function(a){function b(){this._ellipses=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._ellipses=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("etp"===a)return $("<select></select>").attr("data-property","etp").append($("<option></option>").attr("value",GEllipse.Type.Arc).text("Arc")).append($("<option></option>").attr("value",GEllipse.Type.Chord).text("Chord")).append($("<option></option>").attr("value",GEllipse.Type.Pie).text("Pie")).on("change",function(){b._assignProperty(a,$(this).val())});if("sa"===a||"ea"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=GLength.parseEquationValue($(this).val());null!==c?(c=GMath.normalizeAngleRadians(GMath.toRadians(c)),b._assignProperty(a,GMath.PI2-c)):b._updateProperties()});throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","127px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).append(b("etp").css("width","114px"))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).html('<span class="fa fa-stop" style="font-size:11px;transform:rotate(45deg)"></span>').append(b("sa").css({"margin-left":"5px",width:"38px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"66px"}).html('<span class="fa fa-circle"></span>').append(b("ea").css({"margin-left":"3px",width:"38px"})))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._ellipses=[];for(var c=0;c<b.length;++c)b[c]instanceof GEllipse&&this._ellipses.push(b[c]);return this._ellipses.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._ellipses.length>0&&this._ellipses[0]===a.node&&this._updateProperties()},b.prototype._updateProperties=function(){var a=this._ellipses[0];this._panel.find('select[data-property="etp"]').val(a.getProperty("etp")),this._panel.find('input[data-property="sa"]').val(GUtil.formatNumber(GMath.toDegrees(GMath.PI2-a.getProperty("sa")),2)),this._panel.find('input[data-property="ea"]').val(GUtil.formatNumber(GMath.toDegrees(GMath.PI2-a.getProperty("ea")),2))},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._ellipses.length;++d)this._ellipses[d].setProperties(a,b)}finally{c.commitTransaction("Modify Ellipse Properties")}},b.prototype.toString=function(){return"[Object GEllipseProperties]"},a.GEllipseProperties=b}(this),function(a){function b(){}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._image=null,b.prototype.init=function(a){this._panel=a,a.css("width","210px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).append($("<span></span>").addClass("fa fa-image")).append($("<span></span>").css({"text-overflow":"ellipsis","padding-left":"5px"}).attr("data-property","url"))).append($("<div></div>").css({position:"absolute",top:"30px",left:"5px"}).append($("<button></button>").attr("data-action","embed").text("Embed").on("click",function(){image2Base64(this._image.getImage(),function(a){GEditor.tryRunTransaction(this._image,function(){this._image.setProperty("url",a)}.bind(this),"Embed Image")}.bind(this))}.bind(this))).append($("<button></button>").attr("data-action","link").text("Link").on("click",function(){var a=this._image.getGeometryBBox().getSide(GRect.Side.TOP_LEFT);this._document.getStorage().openResourcePrompt(this._document.getUrl(),["jpg","jpeg","png","gif"],function(b){GEditor.tryRunTransaction(this._image,function(){this._image.setProperties(["url","trf"],[new URI(b).relativeTo(this._document.getUrl()).toString(),new GTransform(1,0,0,1,a.getX(),a.getY())])}.bind(this),"Replace Image")}.bind(this))}.bind(this))).append($("<button></button>").attr("data-action","export").text("Export").on("click",function(){var a=gApp.getMatchingStorage(!0,!0,"png",!1,this._document.getStorage());a&&a.saveResourcePrompt(this._document.getUrl(),this._image.getLabel(),["png"],function(b){image2ArrayBuffer(this._image.getImage(),function(c){a.save(b,c,!0)})}.bind(this))}.bind(this))).append($("<button></button>").attr("data-action","reset-size").text("Reset Size").on("click",function(){var a=this._image.getGeometryBBox().getSide(GRect.Side.TOP_LEFT);GEditor.tryRunTransaction(this._image,function(){this._image.setProperty("trf",new GTransform(1,0,0,1,a.getX(),a.getY()))}.bind(this),"Reset Size")}.bind(this)))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<button></button>").attr("data-image-palette","button").css({position:"absolute",top:"65px",left:"5px"}).text("Get Image Palette").on("click",this._updateImagePalette.bind(this))).append($("<div></div>").attr("data-image-palette","palette").css({position:"absolute",top:"65px",left:"5px",right:"5px",height:"27px"}))},b.prototype._updateImagePalette=function(){var a=this._image.getImage(),b=this._panel.find('[data-image-palette="palette"]');b.empty();var c=function(a){$("<div></div>").gPatternTarget({allowDrop:!1}).gPatternTarget("types",[GColor]).gPatternTarget("value",a).css({display:"inline-block",height:"100%",width:"12.5%",background:GPattern.asCSSBackground(a)}).appendTo(b)}.bind(this);if(a){b.css("display",""),this._panel.find('[data-image-palette="button"]').css("display","none");var d=new ColorThief,e=new GRGBColor(d.getColor(a));c(e);for(var f=d.getPalette(a,16),g=1,h=0;h<f.length;++h){var i=new GRGBColor(f[h]);if(!GUtil.equals(i,e)&&(c(i),++g>=8))break}}},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().removeEventListener(GImage.StatusEvent,this._imageStatus,this),this._document=null),this._image=null;for(var c=0;c<b.length;++c)if(b[c]instanceof GImage){if(this._image){this._image=null;break}this._image=b[c]}return this._image?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(GImage.StatusEvent,this._imageStatus,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._image&&this._image===a.node&&this._updateProperties()},b.prototype._imageStatus=function(a){a.image!==this._image||a.status!==GImage.ImageStatus.Error&&a.status!==GImage.ImageStatus.Loaded||this._updateProperties()},b.prototype._updateProperties=function(){var a=this._image.getProperty("url"),b=0===a.indexOf("data:"),c=this._image.getStatus(),d=this._image.getImage(),e=d&&c===GImage.ImageStatus.Loaded,f=this._image.getGeometryBBox();this._panel.find('[data-property="url"]').text(b?"<Embedded Image>":decodeURIComponent(a)),this._panel.find('button[data-action="embed"]').prop("disabled",!e||b),this._panel.find('button[data-action="link"]').prop("disabled",!this._document.isSaveable()),this._panel.find('button[data-action="export"]').prop("disabled",!e||!this._document.isSaveable()),this._panel.find('button[data-action="reset-size"]').prop("disabled",!e||d.naturalWidth===f.getWidth()&&d.naturalHeight===f.getHeight()),this._panel.find('[data-image-palette="button"]').prop("disabled",!e).css("display",""),this._panel.find('[data-image-palette="palette"]').css("display","none")},b.prototype.toString=function(){return"[Object GImageProperties]"},a.GImageProperties=b}(this),function(a){function b(){this._elements=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._elements=null,b.prototype._elementsBBox=null,b.prototype._firstElementsBBox=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;return"name"===a?$("<input>").css("width","100%").attr("data-name","").on("change",function(a){GEditor.tryRunTransaction(b._elements[0],function(){b._elements[0].setProperty("name",$(a.target).val())},"Rename Element")}):"x"===a||"y"===a||"w"===a||"h"===a?$("<input>").attr("type","text").attr("data-dimension",a).on("change",function(){b._assignDimension(a,$(this).val())}):void 0}.bind(this);a.css("width","136px").append($("<div></div>").addClass("g-input").css({position:"absolute",left:"5px",top:"9px",width:"41px",height:"41px"})).append($("<label></label>").css({position:"absolute",left:"51px",top:"5px",width:"77px","text-transform":"uppercase"}).attr("data-type","")).append(b("name").css({position:"absolute",left:"51px",top:"30px",width:"77px"})).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<button></button>").css({position:"absolute",left:"5px",top:"77px",padding:"0px","font-size":"10px"}).on("click",function(){var a=$(this);
a.toggleClass("g-active",!a.hasClass("g-active"))}).addClass("g-flat fa fa-lock").attr("title","Keep Ratio").attr("data-ratio","")).append($("<label></label>").css({position:"absolute",left:"15px",top:"65px"}).text("W:").append(b("w").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",left:"15px",top:"89px"}).text("H:").append(b("h").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",left:"75px",top:"65px"}).text("X:").append(b("x").css({"margin-left":"3px",width:"41px"}))).append($("<label></label>").css({position:"absolute",left:"75px",top:"89px"}).text("Y:").append(b("y").css({"margin-left":"3px",width:"41px"})))},b.prototype.update=function(a,b){return this._document&&(this._document.getScene().removeEventListener(GElement.GeometryChangeEvent,this._geometryChange,this),this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document=null),this._elements=b.slice(),this._elements.length>0?(this._document=a,this._document.getScene().addEventListener(GElement.GeometryChangeEvent,this._geometryChange,this),this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),this._updateDimensions(),!0):!1},b.prototype._geometryChange=function(a){(a.type===GElement.GeometryChangeEvent.Type.After||a.type===GElement.GeometryChangeEvent.Type.Child)&&this._elements.indexOf(a.element)>=0&&this._updateDimensions()},b.prototype._afterPropertiesChange=function(a){this._elements&&1===this._elements.length&&this._elements[0]===a.node&&a.properties.indexOf("name")>=0&&this._updateProperties()},b.prototype._updateProperties=function(){this._panel.find("input[data-apply]").css("display",this._elements.length<=1?"none":""),this._panel.find("label[data-type]").text(1===this._elements.length?this._elements[0].getNodeNameTranslated():this._elements.length.toString()+" Elements"),this._panel.find("input[data-name]").css("visibility",1===this._elements.length&&this._elements[0]instanceof GBlock?"visible":"hidden").val(1===this._elements.length&&this._elements[0]instanceof GBlock?this._elements[0].getLabel():"")},b.prototype._updateDimensions=function(a){var b=function(a,b){this._panel.find('input[data-dimension="'+a+'"]').val(null!==b?this._document.getScene().pointToString(b):"").parents("label").css("display",null===b?"none":"")}.bind(this);if(!a){this._elementsBBox=null,this._firstElementsBBox=null;for(var c=0;c<this._elements.length;++c)if(this._elements[c].hasMixin(GElement.Transform)){var d=this._elements[c].getGeometryBBox();d&&!d.isEmpty()&&(this._elementsBBox=this._elementsBBox?this._elementsBBox.united(d):d,this._firstElementsBBox||(this._firstElementsBBox=d))}this._elementsBBox||(this._elementsBBox=null,this._firstElementsBBox=this._elementsBBox)}if(this._firstElementsBBox){var e=!0,f=this._getDelta();this._panel.find("button[data-ratio]").css("display",""),e?(b("x",this._elementsBBox.getX()-f.getX()),b("y",this._elementsBBox.getY()-f.getY()),b("w",this._elementsBBox.getWidth()),b("h",this._elementsBBox.getHeight())):(b("x",this._firstElementsBBox.getX()-f.getX()),b("y",this._firstElementsBBox.getY()-f.getY()),b("w",this._firstElementsBBox.getWidth()),b("h",this._firstElementsBBox.getHeight()))}else this._panel.find("button[data-ratio]").css("display","none"),b("x",null),b("y",null),b("w",null),b("h",null)},b.prototype._assignDimension=function(a,b){var c=this._document.getScene().stringToPoint(b);if(null===c||"number"!=typeof c||("w"===a||"h"==a)&&0>=c)return void this._updateDimensions();if("x"===a||"y"===a){var d=this._getDelta();switch(a){case"x":c+=d.getX();break;case"y":c+=d.getY()}}var e=function(b,d){if("w"===a||"h"===a){var e=1,f=1;switch(a){case"w":e=c/b.getWidth(),d&&(f=e);break;case"h":f=c/b.getHeight(),d&&(e=f)}return(new GTransform).translated(-b.getX(),-b.getY()).scaled(e,f).translated(b.getX(),b.getY())}switch(a){case"x":return(new GTransform).translated(c-b.getX(),0);case"y":return(new GTransform).translated(0,c-b.getY())}},f=!0,g=this._panel.find("button[data-ratio]").hasClass("g-active"),h=this._document.getEditor();h.beginTransaction();try{if(f)for(var i=e(this._elementsBBox,g),j=0;j<this._elements.length;++j)this._elements[j].transform(i);else for(var j=0;j<this._elements.length;++j){var i=e(this._elements[j].getGeometryBBox(),g);this._elements[j].transform(i)}}finally{h.commitTransaction("Change Size")}},b.prototype._getDelta=function(){var a=this._document.getScene();if(a.getProperty("singlePage")===!0){var b=a.getActivePage();if(b)return b.getGeometryBBox().getSide(GRect.Side.TOP_LEFT)}return new GPoint(0,0)},b.prototype.toString=function(){return"[Object GInfoProperties]"},a.GInfoProperties=b}(this),function(a){function b(){this._pages=[]}GObject.inherit(b,GProperties),b.SIZE_PRESETS=[{name:"Paper",sizes:[{name:"A0",width:"841mm",height:"1189mm"},{name:"A1",width:"594mm",height:"841mm"},{name:"A2",width:"420mm",height:"594mm"},{name:"A3",width:"297mm",height:"420mm"},{name:"A4",width:"210mm",height:"297mm"},{name:"A5",width:"148,5mm",height:"210mm"}]},{name:"Phone",sizes:[{name:"Apple iPhone 4 (S)",width:"640px",height:"960px"},{name:"Apple iPhone 5",width:"640px",height:"1136px"}]},{name:"Tablet",sizes:[{name:"Apple iPad 1 & 2 & Mini",width:"768px",height:"1024px"},{name:"Apple iPad 3 & 4",width:"1536px",height:"2048px"}]}],b.prototype._panel=null,b.prototype._document=null,b.prototype._pages=null,b.prototype.init=function(a){this._panel=a;var c=function(a){var c=this;if("msref"===a)return $("<select></select>").attr("data-property","msref").on("change",function(){var b=$(this).val();c._assignProperty(a,""===b?null:b)});if("size-preset"===a){var d=$("<select></select>").attr("data-property","size-preset").on("change",function(){var a=c._document.getScene(),d=$(this).val();if(d.indexOf(",")>=0){var e=d.split(","),f=b.SIZE_PRESETS[parseInt(e[0])].sizes[parseInt(e[1])],g=a.stringToPoint(f.width),h=a.stringToPoint(f.height);c._panel.find('[name="w"]').val(a.pointToString(g)),c._panel.find('[name="h"]').val(a.pointToString(h)),c._assignProperties(["w","h"],[g,h])}});d.append($("<option></option>").attr("value","x").text("Custom Size"));for(var e=0;e<b.SIZE_PRESETS.length;++e){var f=b.SIZE_PRESETS[e],g=$("<optgroup></optgroup>").attr("label",f.name);d.append(g);for(var h=0;h<f.sizes.length;++h){var i=f.sizes[h];$("<option></option>").attr("value",e.toString()+","+h.toString()).text(i.name).appendTo(g)}}return d}if("bck"===a)return $("<div></div>").attr("data-property",a).gPatternPicker().gPatternPicker("types",[null,GColor,GGradient]).on("patternchange",function(b,d,e){"number"==typeof e?c._assignProperties([a,"bop"],[d,e]):c._assignProperty(a,d)});if("w"===a||"h"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var b=c._document.getScene().stringToPoint($(this).val());null!==b&&"number"==typeof b&&b>=0?c._assignProperty(a,b):c._updateProperties(),c._selectSizePreset()});if("bl"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var b=c._document.getScene().stringToPoint($(this).val());null!==b&&"number"==typeof b&&b>=0?c._assignProperty(a,b):c._updateProperties()});if("mt"===a||"mb"===a||"ml"===a||"mr"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var b=c._document.getScene().stringToPoint($(this).val());if(null!==b&&"number"==typeof b&&b>=0){var d=c._panel.find("button[data-lock-margin]").hasClass("g-active");d?c._assignProperties(["mt","mb","ml","mr"],[b,b,b,b]):c._assignProperty(a,b)}else c._updateProperties()});throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","250px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).append(c("size-preset").css({width:"110px"}))).append($("<label></label>").css({position:"absolute",top:"5px",left:"125px"}).html('<span class="fa fa-link"></span>').append(c("msref").css({"margin-left":"5px",width:"102px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).text("W:").append(c("w").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"65px"}).text("H:").append(c("h").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"125px"}).text("Bleed:").append(c("bl").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",top:"30px",right:"5px"}).append(c("bck"))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<label></label>").css({position:"absolute",left:"5px",top:"65px"}).text("L:").append(c("ml").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",left:"5px",top:"89px"}).text("T:").append(c("mt").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",left:"65px",top:"65px"}).text("R:").append(c("mr").css({"margin-left":"3px",width:"38px"}))).append($("<label></label>").css({position:"absolute",left:"65px",top:"89px"}).text("B:").append(c("mb").css({"margin-left":"3px",width:"38px"}))).append($("<button></button>").css({position:"absolute",left:"123px",top:"77px",padding:"0px","font-size":"10px"}).on("click",function(){var a=$(this);a.toggleClass("g-active",!a.hasClass("g-active"))}).addClass("g-flat fa fa-lock g-active").attr("title","Equal Margins").attr("data-lock-margin",""))},b.prototype.update=function(a,b){if(this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().removeEventListener(GNode.AfterInsertEvent,this._updatePages,this),this._document.getScene().removeEventListener(GNode.AfterRemoveEvent,this._updatePages,this),this._document=null),this._pages=[],1===b.length&&b[0]instanceof GScene){var c=b[0].getActivePage();c&&this._pages.push(c)}else for(var d=0;d<b.length;++d)b[d]instanceof GPage&&this._pages.push(b[d]);return this._pages.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(GNode.AfterInsertEvent,this._updatePages,this),this._document.getScene().addEventListener(GNode.AfterRemoveEvent,this._updatePages,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._pages.length>0&&(this._pages[0]===a.node||a.node instanceof GScene&&a.properties.indexOf("unit")>=0)&&this._updateProperties()},b.prototype._updateProperties=function(){var a=this._document.getScene(),b=this._pages[0];this._updatePages(),this._panel.find('select[data-property="msref"]').val(b.getProperty("msref")),this._panel.find('input[data-property="bl"]').val(b.getProperty("bl")),this._panel.find('[data-property="bck"]').gPatternPicker("value",b.getProperty("bck")).gPatternPicker("opacity",b.getProperty("bop")).gPatternPicker("scene",a),this._panel.find('input[data-property="w"]').val(a.pointToString(b.getProperty("w"))),this._panel.find('input[data-property="h"]').val(a.pointToString(b.getProperty("h"))),this._panel.find('input[data-property="mt"]').val(a.pointToString(b.getProperty("mt"))),this._panel.find('input[data-property="mb"]').val(a.pointToString(b.getProperty("mb"))),this._panel.find('input[data-property="ml"]').val(a.pointToString(b.getProperty("ml"))),this._panel.find('input[data-property="mr"]').val(a.pointToString(b.getProperty("mr"))),this._selectSizePreset()},b.prototype._updatePages=function(){var a=this._document.getScene(),b=this._panel.find('select[data-property="msref"]'),c=b.val();b.val(null),b.empty(),$("<option></option>").attr("value","").text("").appendTo(b);for(var d=a.getFirstChild();null!==d;d=d.getNext())d instanceof GPage&&this._pages.indexOf(d)<0&&$("<option></option>").attr("value",d.getReferenceId()).text(d.getLabel()).appendTo(b);b.val(c)},b.prototype._selectSizePreset=function(){for(var a=this._pages[0],c=!1,d=this._panel.find('[data-property="size-preset"]'),e=a.getProperty("w"),f=a.getProperty("h"),g=0;g<b.SIZE_PRESETS.length;++g)for(var h=b.SIZE_PRESETS[g],i=0;i<h.sizes.length;++i){var j=h.sizes[i],k=a.getScene().stringToPoint(j.width),l=a.getScene().stringToPoint(j.height);if(k===e&&l===f){d.val(g.toString()+","+i.toString()),c=!0;break}}c||d.val("x")},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._pages.length;++d)this._pages[d].setProperties(a,b)}finally{c.commitTransaction("Modify Page Properties")}},b.prototype.toString=function(){return"[Object GPageProperties]"},a.GPageProperties=b}(this),function(a){function b(){this._text=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._text=null,b.prototype._textEditor=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if(0===a.indexOf("va-")){var c="",d=a.substr("va-".length);switch(d){case GText.VerticalAlign.Top:c="fa-align-right fa-rotate-270";break;case GText.VerticalAlign.Middle:c="fa-align-center fa-rotate-270";break;case GText.VerticalAlign.Bottom:c="fa-align-left fa-rotate-270"}return $("<button></button>").attr("data-property",a).on("click",function(){b._assignProperty("va",d)}).append($("<span></span>").addClass("fa "+c))}if(0===a.indexOf("_pal-")){var e="",f=a.substr("_pal-".length);switch(f){case GStylable.ParagraphAlignment.Left:e="left";break;case GStylable.ParagraphAlignment.Center:e="center";break;case GStylable.ParagraphAlignment.Right:e="right";break;case GStylable.ParagraphAlignment.Justify:e="justify"}return $("<button></button>").attr("data-property",a).on("click",function(){b._assignProperty("_pal",$(this).hasClass("g-active")?null:f)}).append($("<span></span>").addClass("fa fa-align-"+e))}if("aw"===a||"ah"===a)return $("<input>").attr("type","checkbox").attr("data-property",a).on("change",function(){b._assignProperty(a,$(this).is(":checked"))});if("_tff"===a){for(var g=$("<select></select>").attr("data-property",a).append($("<option></option>").attr("value","").text("")).on("change",function(){var c=$(this).val();b._assignProperty(a,""===c?null:c)}),h={},i=ifFont.getFamilies(),j=0;j<i.length;++j){var k=ifFont.getCategory(i[j]),l=null;h.hasOwnProperty(k)?l=h[k]:h[k]=l=$("<optgroup></optgroup>").attr("label",ifLocale.get(GFont.CategoryName[k])).appendTo(g),$("<option></option>").attr("value",i[j]).text(i[j]).appendTo(l)}return g}if("_tfi"===a||"_tws"===a||"_tcs"===a||"_pin"===a||"_pcg"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null===c||"number"==typeof c&&c>=0?b._assignProperty(a,c):b._updateProperties()});if("_tfw"===a){for(var g=$("<select></select>").attr("data-property",a).append($("<option></option>").attr("value","").text("")).on("change",function(){var c=$(this).val();b._assignProperty(a,""===c?null:c)}),j=100;900>=j;j+=100)$("<option></option>").attr("value",j).text(ifLocale.get(GFont.WeightName[j])).appendTo(g);return g}if("_tfs"===a)return $("<select></select>").attr("data-property",a).append($("<option></option>").attr("value","").text("")).append($("<option></option>").attr("value",GFont.Style.Normal).text("Normal")).append($("<option></option>").attr("value",GFont.Style.Italic).text("Italic")).on("change",function(){var c=$(this).val();b._assignProperty(a,""===c?null:c)});if("_pwm"===a)return $("<select></select>").attr("data-property",a).append($("<option></option>").attr("value","").text("")).append($("<option></option>").attr("value",GStylable.ParagraphWrapMode.None).text("None")).append($("<option></option>").attr("value",GStylable.ParagraphWrapMode.Words).text("Words")).append($("<option></option>").attr("value",GStylable.ParagraphWrapMode.All).text("All")).on("change",function(){var c=$(this).val();b._assignProperty(a,""===c?null:c)});if("_plh"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=$(this).val();c=c&&""!==c?GLength.parseEquationValue(c):null,null===c||c>0?b._assignProperty(a,c):b._updateProperties()});if("_pcc"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=$(this).val();c=c&&""!==c?parseInt(c):null,null===c||c>1?b._assignProperty(a,c):b._updateProperties()});throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","320px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).append(b("_tff").css({width:"120px"})).append(b("_tfw").css({width:"83px"})).append(b("_tfs").css({width:"65px"})).append(b("_tfi").css({width:"30px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).html('<span class="fa fa-text-width"></span>').append(b("_tcs").css({"margin-left":"5px",width:"30px"}).attr("title","Character Spacing"))).append($("<label></label>").css({position:"absolute",top:"30px",left:"60px"}).html('<span class="fa fa-text-width"></span>').append(b("_tws").css({"margin-left":"5px",width:"30px"}).attr("title","Word Spacing"))).append($("<label></label>").css({position:"absolute",top:"30px",left:"115px"}).html('<span class="fa fa-text-height"></span>').append(b("_plh").css({"margin-left":"5px",width:"30px"}).attr("title","Line Height"))).append($("<div></div>").css({position:"absolute",top:"30px",left:"215px"}).append(b("_pal-"+GStylable.ParagraphAlignment.Left).attr("title","Align Left")).append(b("_pal-"+GStylable.ParagraphAlignment.Center).attr("title","Align Centered")).append(b("_pal-"+GStylable.ParagraphAlignment.Right).attr("title","Align Right")).append(b("_pal-"+GStylable.ParagraphAlignment.Justify).attr("title","Justify"))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<div></div>").css({position:"absolute",top:"65px",left:"5px"}).append(b("va-"+GText.VerticalAlign.Top).attr("title","Align Top")).append(b("va-"+GText.VerticalAlign.Middle).attr("title","Align Middle")).append(b("va-"+GText.VerticalAlign.Bottom).attr("title","Align Bottom"))).append($("<label></label>").css({position:"absolute",top:"65px",left:"85px"}).html('<span class="fa fa-sort-alpha-asc"></span>').append(b("_pwm").css({"margin-left":"5px",width:"60px"}).attr("title","Wrap Mode"))).append($("<label></label>").css({position:"absolute",top:"65px",right:"5px"}).text("Auto Height:").append(b("ah"))).append($("<label></label>").css({position:"absolute",top:"89px",left:"5px"}).html('<span class="fa fa-indent"></span>').append(b("_pin").css({"margin-left":"5px",width:"30px"}).attr("title","Indent"))).append($("<label></label>").css({position:"absolute",top:"89px",left:"60px"}).html('<span class="fa fa-reorder fa-rotate-270"></span>').append(b("_pcc").css({"margin-left":"5px",width:"30px"}).attr("title","Columns"))).append($("<label></label>").css({position:"absolute",top:"89px",left:"115px"}).html('<span class="fa fa-sort-amount-desc fa-rotate-270"></span>').append(b("_pcg").css({"margin-left":"5px",width:"30px"}).attr("title","Columns Gap"))).append($("<label></label>").css({position:"absolute",top:"89px",right:"5px"}).text("Auto Width:").append(b("aw")))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document.getEditor().removeEventListener(GEditor.InlineEditorEvent,this._inlineEditorEvent),this._document=null),this._text=[];for(var c=0;c<b.length;++c)b[c]instanceof GText&&this._text.push(b[c]);return this._text.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getEditor().addEventListener(GEditor.InlineEditorEvent,this._inlineEditorEvent,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._text.length>0&&(this._text[0]===a.node||this._text[0].getContent()===a.node)&&this._updateProperties()},b.prototype._inlineEditorEvent=function(a){switch(a.type){case GEditor.InlineEditorEvent.Type.AfterOpen:this._textEditor=a.editor,this._updateProperties();break;case GEditor.InlineEditorEvent.Type.AfterClose:this._textEditor=null,this._updateProperties();break;case GEditor.InlineEditorEvent.Type.SelectionChanged:this._updateProperties()}},b.prototype._updateProperties=function(){var a=this._textEditor?this._textEditor:GElementEditor.getEditor(this._text[0]);this._panel.find('button[data-property^="va"]').each(function(b,c){var d=$(c),e=this._textEditor&&this._textEditor.isInlineEdit()?!0:!1;d.prop("disabled",e).toggleClass("g-active",e?!1:d.attr("data-property")==="va-"+a.getProperty("va"))}.bind(this)),this._panel.find('input[data-property="ah"]').prop("disabled",this._textEditor&&this._textEditor.isInlineEdit()).prop("checked",a.getProperty("ah")),this._panel.find('input[data-property="aw"]').prop("disabled",this._textEditor&&this._textEditor.isInlineEdit()).prop("checked",a.getProperty("aw"));var b=a.getProperty("_tff",!0);this._panel.find('select[data-property="_tff"]').val(a.getProperty("_tff")),this._panel.find('input[data-property="_tfi"]').val(this._document.getScene().pointToString(a.getProperty("_tfi")));var c=this._panel.find('select[data-property="_tfw"]');c.val(a.getProperty("_tfw"));for(var d=ifFont.getWeights(b),e=100;900>=e;e+=100)c.find('[value="'+e+'"]').prop("disabled",!d||d.indexOf(e)<0);var f=this._panel.find('select[data-property="_tfs"]');f.val(a.getProperty("_tfs"));var g=ifFont.getStyles(b);f.find("option").each(function(a,b){var c=$(b),d=c.attr("value");""!==d&&c.prop("disabled",g&&g.indexOf(d)<0)}),this._panel.find('input[data-property="_tws"]').val(this._document.getScene().pointToString(a.getProperty("_tws"))),this._panel.find('input[data-property="_tcs"]').val(this._document.getScene().pointToString(a.getProperty("_tcs"))),this._panel.find('input[data-property="_pcc"]').val(a.getProperty("_pcc")),this._panel.find('input[data-property="_pcg"]').val(this._document.getScene().pointToString(a.getProperty("_pcg")));var h=a.getProperty("_pal")||"";this._panel.find('button[data-property^="_pal"]').each(function(a,b){var c=$(b);c.toggleClass("g-active",c.attr("data-property")==="_pal-"+h)}),this._panel.find('select[data-property="_pwm"]').val(a.getProperty("_pwm")),this._panel.find('input[data-property="_pin"]').val(this._document.getScene().pointToString(a.getProperty("_pin")));var i=a.getProperty("_plh");this._panel.find('input[data-property="_plh"]').val(null!==i?GUtil.formatNumber(i):"")},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){if(this._textEditor)this._textEditor.setProperties(a,b);else{var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._text.length;++d){var e=GElementEditor.getEditor(this._text[d]);e.setProperties(a,b)}}finally{c.commitTransaction("Modify Text Properties")}}},b.prototype.toString=function(){return"[Object GTextProperties]"},a.GTextProperties=b}(this),function(a){function b(){this._elements=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._elements=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("_fpt"===a||"_bpt"===a)return $("<div></div>").attr("data-property",a).gPatternPicker().on("patternchange",function(c,d,e){"number"==typeof e?b._assignProperties([a,"_fpt"===a?"_fop":"_bop"],[d,e]):b._assignProperty(a,d)});if("fill-type"===a)return $("<select></select>").attr("data-property",a).gPatternTypePicker().on("patterntypechange",function(a,c){b._assignProperty("_fpt",GPattern.smartCreate(c,b._panel.find('[data-property="_fpt"]').gPatternPicker("value"))),c&&c!==GBackground&&b._panel.find('[data-property="_fpt"]').gPatternPicker("open")});if("_fop"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=GLength.parseEquationValue($(this).val());null!==c&&c>=0&&100>=c?b._assignProperty(a,c/100):b._updateProperties()});if("_bw"===a||"_bml"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=GLength.parseEquationValue($(this).val());null!==c&&c>=0?b._assignProperty(a,c):b._updateProperties()});if(0===a.indexOf("_ba-")){var c="",d=a.substr("_ba-".length);switch(d){case GStylable.BorderAlignment.Inside:c="gicon-stroke-inside";break;case GStylable.BorderAlignment.Center:c="gicon-stroke-center";break;case GStylable.BorderAlignment.Outside:c="gicon-stroke-outside"}return $("<button></button>").attr("data-property",a).on("click",function(){b._assignProperty("_ba",d)}).append($("<span></span>").addClass(c))}if(0===a.indexOf("_blc-")){var c="",e=a.substr("_blc-".length);switch(e){case GPaintCanvas.LineCap.Butt:c="gicon-line-cap-butt";break;case GPaintCanvas.LineCap.Round:c="gicon-line-cap-round";break;case GPaintCanvas.LineCap.Square:c="gicon-line-cap-square"}return $("<button></button>").attr("data-property",a).on("click",function(){b._assignProperty("_blc",e)}).append($("<span></span>").addClass(c))}if(0===a.indexOf("_blj-")){var c="",f=a.substr("_blj-".length);switch(f){case GPaintCanvas.LineJoin.Bevel:c="gicon-line-join-bevel";break;case GPaintCanvas.LineJoin.Round:c="gicon-line-join-round";break;case GPaintCanvas.LineJoin.Miter:c="gicon-line-join-miter"}return $("<button></button>").attr("data-property",a).on("click",function(){b._assignProperty("_blj",f)}).append($("<span></span>").addClass(c))}throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","170px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).append($("<span></span>").addClass("gicon-fill").css({width:"16px","text-align":"center"})).append(b("_fpt").css({"margin-left":"5px",width:"20px"}))).append($("<label></label>").css({position:"absolute",top:"5px",left:"50px"}).append(b("fill-type").css({width:"80px"}))).append($("<label></label>").css({position:"absolute",top:"5px",left:"134px"}).append(b("_fop").css({width:"30px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).append($("<span></span>").addClass("gicon-stroke").css({width:"16px","text-align":"center"})).append(b("_bpt").css({"margin-left":"5px",width:"20px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"50px"}).append(b("_bw").css({width:"30px"}))).append($("<div></div>").css({position:"absolute",top:"30px",left:"86px"}).append(b("_ba-"+GStylable.BorderAlignment.Inside).attr("title","Border Inside")).append(b("_ba-"+GStylable.BorderAlignment.Center).attr("title","Border Centered")).append(b("_ba-"+GStylable.BorderAlignment.Outside).attr("title","Border Outside"))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<label></label>").css({position:"absolute",top:"65px",left:"5px"}).text("Ending:")).append($("<div></div>").css({position:"absolute",top:"65px",left:"50px"}).append(b("_blc-"+GPaintCanvas.LineCap.Butt).attr("title","Butt")).append(b("_blc-"+GPaintCanvas.LineCap.Round).attr("title","Round")).append(b("_blc-"+GPaintCanvas.LineCap.Square).attr("title","Square"))).append($("<label></label>").css({position:"absolute",top:"89px",left:"5px"}).text("Join:")).append($("<div></div>").css({position:"absolute",top:"89px",left:"50px"}).append(b("_blj-"+GPaintCanvas.LineJoin.Bevel).attr("title","Bevel")).append(b("_blj-"+GPaintCanvas.LineJoin.Round).attr("title","Round")).append(b("_blj-"+GPaintCanvas.LineJoin.Miter).attr("title","Miter")).append(b("_bml").attr("title","Miter-Limit").css("width","30px")))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._elements=[];for(var c=0;c<b.length;++c)b[c].hasMixin(GStylable)&&b[c].getStylePropertySets().indexOf(GStylable.PropertySet.Fill)>=0&&this._elements.push(b[c]);return this._elements.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){a.node===this._elements[0]&&this._updateProperties()},b.prototype._updateProperties=function(){var a=this._document.getScene(),b=this._elements[0],c=b.getProperty("_fpt");this._panel.find('[data-property="_fpt"]').gPatternPicker("value",c).gPatternPicker("opacity",b.getProperty("_fop")).gPatternPicker("scene",a),this._panel.find('[data-property="fill-type"]').gPatternTypePicker("value",c?c.constructor:null),this._panel.find('[data-property="_fop"]').val(GUtil.formatNumber(100*b.getProperty("_fop"),0)),this._panel.find('[data-property="_bpt"]').gPatternPicker("value",b.getProperty("_bpt")).gPatternPicker("opacity",b.getProperty("_bop")).gPatternPicker("scene",a),this._panel.find('[data-property="_bw"]').val(GUtil.formatNumber(b.getProperty("_bw"))),this._panel.find('[data-property^="_ba"]').each(function(a,c){var d=$(c),e=d.attr("data-property").substr("_ba-".length);d.toggleClass("g-active",b.getProperty("_ba")===e)}),this._panel.find('[data-property^="_blc"]').each(function(a,c){var d=$(c),e=d.attr("data-property").substr("_blc-".length);d.toggleClass("g-active",b.getProperty("_blc")===e)}),this._panel.find('[data-property^="_blj"]').each(function(a,c){var d=$(c),e=d.attr("data-property").substr("_blj-".length);d.toggleClass("g-active",b.getProperty("_blj")===e)}),this._panel.find('[data-property="_bml"]').css("display",b.getProperty("_blj")===GPaintCanvas.LineJoin.Miter?"":" none").val(GUtil.formatNumber(b.getProperty("_bml")))},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._elements.length;++d)this._elements[d].setProperties(a,b)}finally{c.commitTransaction("Modify Fill/Border Properties")}},b.prototype.toString=function(){return"[Object GFillBorderProperties]"},a.GFillBorderProperties=b}(this),function(a){function b(){this._elements=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._elements=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("_sbl"===a)return $("<select></select>").attr("data-property",a).append($("<option></option>").attr("value","mask").text("Mask")).append($('<optgroup label="Blending"></optgroup>')).gBlendMode().on("change",function(){b._assignProperty(a,$(this).val())});if("_stop"===a||"_sfop"===a)return $("<input>").attr("type","text").attr("data-property",a).on("change",function(){var c=GLength.parseEquationValue($(this).val());null!==c&&c>=0&&100>=c?b._assignProperty(a,c/100):b._updateProperties()});if("sref"===a)return $("<button></button>").attr("data-property",a).append($("<span></span>")).append($("<span></span>").addClass("fa fa-caret-down"));throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","142px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px",right:"5px"}).append(b("_sbl").css({width:"100%"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).text("Opacity:").append(b("_stop").css({"margin-left":"3px",width:"30px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"86px"}).text("Fill:").append(b("_sfop").css({"margin-left":"3px",width:"30px"}))).append($("<hr>").css({position:"absolute",left:"0px",right:"0px",top:"50px"})).append($("<label></label>").css({position:"absolute",top:"65px",left:"5px",right:"5px"}).append(b("sref").on("click",function(a){$("<div></div>").css({width:"250px"}).addClass("g-style-list").gStylePanel().gStylePanel("attach",this._document.getScene().getStyleCollection()).gOverlay({releaseOnClose:!0}).gOverlay("open",a.target).on("close",function(){$(this).gStylePanel("detach")
}).on("stylechange",function(a,b){$(a.target).gOverlay("close"),GEditor.tryRunTransaction(this._elements[0],function(){for(var a=0;a<this._elements.length;++a)this._elements[a].assignStyleFrom(b),this._elements[a].setProperty("sref",null!==b.getProperty("_sdf")?null:b.getReferenceId())}.bind(this),"Disconnect Style")}.bind(this))}.bind(this)).css({width:"100%"}))).append($("<div></div>").css({position:"absolute",top:"89px",left:"5px"}).append($("<button></button>").attr("title","New Style").append($("<span></span>").addClass("fa fa-plus")).on("click",function(){var a=this._document.getScene(),b=new GStyle;b.setProperty("name","Style-"+a.getStyleCollection().queryCount("> style").toString()),b.setProperty("ps",this._elements[0].getStylePropertySets().slice()),b.assignStyleFrom(this._elements[0]),new GStyleDialog(b).open(function(c,d){c&&GEditor.tryRunTransaction(a,function(){d(),a.getStyleCollection().appendChild(b);for(var c=0;c<this._elements.length;++c)this._elements[c].setProperty("sref",b.getReferenceId())}.bind(this),"Add Style")}.bind(this))}.bind(this))).append($("<button></button>").attr("title","Redefine Style").attr("data-link-action","redefine").append($("<span></span>").addClass("fa fa-check")).on("click",function(){for(var a=[],b=0;b<this._elements.length;++b){var c=this._elements[b].getReferencedStyle();c&&a.indexOf(c)<0&&a.push({style:c,element:this._elements[b]})}a.length&&GEditor.tryRunTransaction(a[0].element,function(){for(var b=0;b<a.length;++b)a[b].style.assignStyleFrom(a[b].element)}.bind(this),"Update Style")}.bind(this))).append($("<button></button>").attr("title","Remove Style Differences").attr("data-link-action","removediff").append($("<span></span>").addClass("fa fa-remove")).on("click",function(){GEditor.tryRunTransaction(this._elements[0],function(){for(var a=0;a<this._elements.length;++a){var b=this._elements[a].getReferencedStyle();b&&this._elements[a].assignStyleFrom(b)}}.bind(this),"Reset Style")}.bind(this))).append($("<button></button>").attr("title","Disconnect Style").attr("data-link-action","disconnect").append($("<span></span>").addClass("fa fa-chain-broken")).on("click",function(){GEditor.tryRunTransaction(this._elements[0],function(){for(var a=0;a<this._elements.length;++a)this._elements[a].setProperty("sref",null)}.bind(this),"Disconnect Style")}.bind(this))).append($("<button></button>").attr("title","Delete Style").attr("data-link-action","delete").append($("<span></span>").addClass("fa fa-trash-o")).on("click",function(){vex.dialog.confirm({message:"Are you sure you want to delete the selected style?",callback:function(a){if(a){var b=this._elements[0].getReferencedStyle();b&&GEditor.tryRunTransaction(b,function(){b.disconnectStyle(),b.getParent().removeChild(b)},"Delete Style")}}.bind(this)})}.bind(this))).append($("<button></button>").attr("title","Set As Default Style").append($("<span></span>").addClass("fa fa-thumb-tack")).on("click",function(){var a=null;this._elements[0]instanceof GText?a=this._document.getScene().getStyleCollection().querySingle('style[_sdf="text"]'):this._elements[0]instanceof GShape&&(a=this._document.getScene().getStyleCollection().querySingle('style[_sdf="shape"]')),a&&GEditor.tryRunTransaction(a,function(){a.assignStyleFrom(this._elements[0])}.bind(this),"Change Default Style")}.bind(this))))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._elements=[];for(var c=0;c<b.length;++c)b[c].hasMixin(GElement.Stylable)&&b[c].getStylePropertySets().indexOf(GStylable.PropertySet.Style)>=0&&this._elements.push(b[c]);return this._elements.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){a.node===this._elements[0]&&this._updateProperties()},b.prototype._updateProperties=function(){var a=(this._document.getScene(),this._elements[0]);this._panel.find('[data-property="_sbl"]').val(a.getProperty("_sbl")),this._panel.find('[data-property="_sfop"]').val(GUtil.formatNumber(100*a.getProperty("_sfop"),0)),this._panel.find('[data-property="_stop"]').val(GUtil.formatNumber(100*a.getProperty("_stop"),0));var b=a.getReferencedStyle();this._panel.find('[data-property="sref"] > :first-child').text(b?b.getProperty("name"):"No Style"),this._panel.find("button[data-link-action]").prop("disabled",!b)},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._elements.length;++d)this._elements[d].setProperties(a,b)}finally{c.commitTransaction("Modify Style")}},b.prototype.toString=function(){return"[Object GStyleProperties]"},a.GStyleProperties=b}(this),function(a){function b(){this._slices=[]}GObject.inherit(b,GProperties),b.prototype._panel=null,b.prototype._document=null,b.prototype._slices=null,b.prototype.init=function(a){this._panel=a;var b=function(a){var b=this;if("cls"===a)return $("<div></div>").attr("data-property",a).gPatternPicker().gPatternPicker("types",[GColor]).on("patternchange",function(c,d){b._assignProperty(a,d)});if("trm"===a)return $("<input>").attr("type","checkbox").attr("data-property",a).on("change",function(){b._assignProperty(a,$(this).is(":checked"))});throw new Error("Unknown input property: "+a)}.bind(this);a.css("width","120px").append($("<label></label>").css({position:"absolute",top:"5px",left:"5px"}).text("Color:").append(b("cls").css({"margin-left":"3px"}))).append($("<label></label>").css({position:"absolute",top:"30px",left:"5px"}).text("Trim Transparent:").append(b("trm")))},b.prototype.update=function(a,b){this._document&&(this._document.getScene().removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document=null),this._slices=[];for(var c=0;c<b.length;++c)b[c]instanceof GSlice&&this._slices.push(b[c]);return this._slices.length===b.length?(this._document=a,this._document.getScene().addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0):!1},b.prototype._afterPropertiesChange=function(a){this._slices.length>0&&this._slices[0]===a.node&&this._updateProperties()},b.prototype._updateProperties=function(){var a=this._document.getScene(),b=this._slices[0];this._panel.find('[data-property="cls"]').gPatternPicker("value",b.getProperty("cls")).gPatternPicker("scene",a),this._panel.find('input[data-property="trm"]').prop("checked",b.getProperty("trm"))},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{for(var d=0;d<this._slices.length;++d)this._slices[d].setProperties(a,b)}finally{c.commitTransaction("Modify Slice Properties")}},b.prototype.toString=function(){return"[Object GSliceProperties]"},a.GSliceProperties=b}(this),function(a){function b(){GSidebar.call(this)}GObject.inherit(b,GSidebar),b.ID="document",b.TITLE=new GLocale.Key(b,"title"),b.prototype._htmlElement=null,b.prototype._document=null,b.prototype.getId=function(){return b.ID},b.prototype.getTitle=function(){return b.TITLE},b.prototype.getIcon=function(){return'<span class="fa fa-fw fa-file-text-o"></span>'},b.prototype.init=function(a){GSidebar.prototype.init.call(this,a),this._htmlElement=a;var b=function(a){var b=this;if("unit"===a)return $("<select></select>").attr("data-property",a).gUnit().on("change",function(){b._assignProperty(a,$(this).val())});if("unitSnap"===a)return $("<input>").attr("type","checkbox").attr("data-property",a).on("change",function(){b._assignProperty(a,$(this).is(":checked"))});if("gridSizeX"===a||"gridSizeY"===a)return $("<input>").attr("type","text").attr("data-property",a).css("width","3em").on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null!==c&&"number"==typeof c&&c>=1?b._assignProperty(a,0>c?0:c):b._updateProperties()});if("gridActive"===a)return $("<input>").attr("type","checkbox").attr("data-property",a).on("change",function(){b._assignProperty(a,$(this).is(":checked"))});if("crDistSmall"===a||"crDistBig"===a)return $("<input>").attr("type","text").attr("data-property",a).css("width","3em").on("change",function(){var c=b._document.getScene().stringToPoint($(this).val());null!==c&&"number"==typeof c&&c>=1?b._assignProperty(a,0>c?0:c):b._updateProperties()});if("crConstraint"===a)return $("<input>").attr("type","text").attr("data-property",a).css("width","3em").on("change",function(){var c=GLength.parseEquationValue($(this).val());null!==c?(c=GMath.normalizeAngleRadians(GMath.toRadians(c)),b._assignProperty(a,c)):b._updateProperties()});if("snapDist"===a||"pickDist"===a)return $("<input>").attr("type","text").attr("data-property",a).css("width","3em").on("change",function(){var c=parseInt($(this).val());isNaN(c)?b._updateProperties():b._assignProperty(a,c)});if("pathImage"===a||"pathFont"===a||"pathExport"===a)return $("<input>").attr("type","text").attr("data-property",a).css("width","8em").on("change",function(){b._assignProperty(a,$(this).val())});throw new Error("Unknown input property: "+a)}.bind(this);$("<table></table>").addClass("g-form").css({margin:"5px auto"}).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Unit/Snap:")).append($("<td></td>").attr("colspan","3").append(b("unit")).append(b("unitSnap").attr("title","Snap to Units")))).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Grid:")).append($("<td></td>").append(b("gridSizeX").attr("title","Horizontal Grid-Size")).append(b("gridSizeY").attr("title","Vertical Grid-Size"))).append($("<td></td>").attr("colspan","2").append(b("gridActive").attr("title","Show Grid")))).append($("<tr></tr>").append($("<td></td>").attr("colspan","4").append($("<h1></h1>").addClass("g-divider").text("Defaults")))).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Cursor:")).append($("<td></td>").append(b("crDistSmall").attr("title","Small Distance when moving via Arrow-Keys")).append(b("crDistBig").attr("title","Large Distance when moving via Arrow-Keys"))).append($("<td></td>").addClass("label").text("°")).append($("<td></td>").append(b("crConstraint").attr("title","Constraints when moving via Shift in Degrees")))).append($("<tr></tr>").append($("<td></td>").addClass("label").html('<span class="fa fa-arrows"></span> / <span class="fa fa-magnet"></span>')).append($("<td></td>").attr("colspan","3").append(b("pickDist").attr("title","Pick Distance in Pixels")).append(b("snapDist").attr("title","Snap Distance")))).append($("<tr></tr>").append($("<td></td>").attr("colspan","4").append($("<h1></h1>").addClass("g-divider").text("Pathes")))).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Images:")).append($("<td></td>").attr("colspan","3").append(b("pathImage").attr("title","Path for imported image assets")))).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Fonts:")).append($("<td></td>").attr("colspan","3").append(b("pathFont").attr("title","Path for imported font assets")))).append($("<tr></tr>").append($("<td></td>").addClass("label").text("Export:")).append($("<td></td>").attr("colspan","3").append(b("pathExport").attr("title","Path for exported assets")))).appendTo(a)},b.prototype.isEnabled=function(){return!!this._document},b.prototype._documentEvent=function(a){if(a.type===GApplication.DocumentEvent.Type.Activated){this._document=a.document;var b=this._document.getScene();b.addEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),this.trigger(GPalette.UPDATE_EVENT)}else if(a.type===GApplication.DocumentEvent.Type.Deactivated){var b=this._document.getScene();this._document=null,b.removeEventListener(GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this.trigger(GPalette.UPDATE_EVENT)}},b.prototype._afterPropertiesChange=function(a){a.node===this._document.getScene()&&this._updateProperties()},b.prototype._updateProperties=function(){var a=this._document.getScene();this._htmlElement.find('select[data-property="unit"]').val(a.getProperty("unit")),this._htmlElement.find('input[data-property="unitSnap"]').prop("checked",a.getProperty("unitSnap")),this._htmlElement.find('input[data-property="gridSizeX"]').val(a.pointToString(a.getProperty("gridSizeX"))),this._htmlElement.find('input[data-property="gridSizeY"]').val(a.pointToString(a.getProperty("gridSizeY"))),this._htmlElement.find('input[data-property="gridActive"]').prop("checked",a.getProperty("gridActive")),this._htmlElement.find('input[data-property="crDistSmall"]').val(a.pointToString(a.getProperty("crDistSmall"))),this._htmlElement.find('input[data-property="crDistBig"]').val(a.pointToString(a.getProperty("crDistBig"))),this._htmlElement.find('input[data-property="crConstraint"]').val(GUtil.formatNumber(GMath.toDegrees(a.getProperty("crConstraint")),2)),this._htmlElement.find('input[data-property="snapDist"]').val(a.pointToString(a.getProperty("snapDist"))),this._htmlElement.find('input[data-property="pickDist"]').val(a.pointToString(a.getProperty("pickDist"))),this._htmlElement.find('input[data-property="pathImage"]').val(a.getProperty("pathImage")),this._htmlElement.find('input[data-property="pathFont"]').val(a.getProperty("pathFont")),this._htmlElement.find('input[data-property="pathExport"]').val(a.getProperty("pathExport"))},b.prototype._assignProperty=function(a,b){this._assignProperties([a],[b])},b.prototype._assignProperties=function(a,b){var c=this._document.getEditor();c.beginTransaction();try{this._document.getScene().setProperties(a,b)}finally{c.commitTransaction("Modify Document Properties")}},b.prototype.toString=function(){return"[Object GDocumentSidebar]"},a.GDocumentSidebar=b}(this),ifLocale.setValues(GAddLayerAction,GLocale.Language.English,["title"],["Add Layer"]),ifLocale.setValues(GAddPageAction,GLocale.Language.English,["title"],["Add Page"]),ifLocale.setValues(GAlignAction,GLocale.Language.English,["title.align-left","title.align-center","title.align-right","title.align-top","title.align-middle","title.align-bottom","title.align-justify-horizontal","title.align-justify-vertical"],["Align Left","Align Center","Align Right","Align Top","Align Middle","Align Bottom","Justify Horizontal","Justify Vertical"]),ifLocale.setValues(GConvertToPathAction,GLocale.Language.English,["title"],["Convert to Path"]),ifLocale.setValues(GCloneAction,GLocale.Language.English,["title"],["Clone"]),ifLocale.setValues(GCloseAction,GLocale.Language.English,["title"],["Close"]),ifLocale.setValues(GCloseAllAction,GLocale.Language.English,["title"],["Close All"]),ifLocale.setValues(GCopyAction,GLocale.Language.English,["title"],["Copy"]),ifLocale.setValues(GCutAction,GLocale.Language.English,["title"],["Cut"]),ifLocale.setValues(GDeleteAction,GLocale.Language.English,["title"],["Delete"]),ifLocale.setValues(GDeleteLayerAction,GLocale.Language.English,["title"],["Delete Layer"]),ifLocale.setValues(GDeletePageAction,GLocale.Language.English,["title"],["Delete Page"]),ifLocale.setValues(GDistributeAction,GLocale.Language.English,["title.horizontal","title.vertical"],["Distribute Horizontally","Distribute Vertically"]),ifLocale.setValues(GDuplicateAction,GLocale.Language.English,["title"],["Duplicate"]),ifLocale.setValues(GFitAllAction,GLocale.Language.English,["title"],["Fit All"]),ifLocale.setValues(GFitCurrentLayerAction,GLocale.Language.English,["title"],["Fit Layer"]),ifLocale.setValues(GFitCurrentPageAction,GLocale.Language.English,["title"],["Fit Page"]),ifLocale.setValues(GFitSelectionAction,GLocale.Language.English,["title"],["Fit Selection"]),ifLocale.setValues(GGroupAction,GLocale.Language.English,["title"],["Group Selection"]),ifLocale.setValues(GJoinPathsAction,GLocale.Language.English,["title"],["Join Paths"]),ifLocale.setValues(GPlaceImageAction,GLocale.Language.English,["title"],["Place Image..."]),ifLocale.setValues(GInvertSelectionAction,GLocale.Language.English,["title"],["Invert Selection"]),ifLocale.setValues(GLayerTypeAction,GLocale.Language.English,["title"],["%name% Layer"]),ifLocale.setValues(GNewAction,GLocale.Language.English,["title"],["New..."]),ifLocale.setValues(GNewWindowAction,GLocale.Language.English,["title"],["New Window"]),ifLocale.setValues(GOpenAction,GLocale.Language.English,["title"],["Open..."]),ifLocale.setValues(GArrangeAction,GLocale.Language.English,["title.send-front","title.bring-forward","title.send-backward","title.send-back"],["Send To Front","Bring Forward","Send Backward","Send To Back"]),ifLocale.setValues(GOriginalViewAction,GLocale.Language.English,["title"],["Original-View"]),ifLocale.setValues(GPaintModeAction,GLocale.Language.English,["title"],["%name% View"]),ifLocale.setValues(GPasteAction,GLocale.Language.English,["title"],["Paste"]),ifLocale.setValues(GPasteInPlaceAction,GLocale.Language.English,["title"],["Paste In Place"]),ifLocale.setValues(GPasteInsideAction,GLocale.Language.English,["title"],["Paste Inside Selection"]),ifLocale.setValues(GPasteStyleAction,GLocale.Language.English,["title"],["Paste Style"]),ifLocale.setValues(GPixelPreviewAction,GLocale.Language.English,["title"],["Pixel Preview"]),ifLocale.setValues(GRedoAction,GLocale.Language.English,["title"],["Redo"]),ifLocale.setValues(GSaveAction,GLocale.Language.English,["title"],["Save"]),ifLocale.setValues(GSaveAllAction,GLocale.Language.English,["title"],["Save All"]),ifLocale.setValues(GSaveAsAction,GLocale.Language.English,["title"],["Save As..."]),ifLocale.setValues(GShowRulersAction,GLocale.Language.English,["title"],["Show Rulers"]),ifLocale.setValues(GSelectAllAction,GLocale.Language.English,["title"],["Select All"]),ifLocale.setValues(GShowAllPagesAction,GLocale.Language.English,["title"],["All Pages visible"]),ifLocale.setValues(GShowGridAction,GLocale.Language.English,["title"],["Show Grid"]),ifLocale.setValues(GSliceFromSelectionAction,GLocale.Language.English,["title"],["Create Slice from Selection"]),ifLocale.setValues(GSnapUnitAction,GLocale.Language.English,["title.full","title.half"],["Snap to full units","Snap to half units"]),ifLocale.setValues(GTransformAction,GLocale.Language.English,["title.rotate-45-left","title.rotate-90-left","title.rotate-180-left","title.rotate-45-right","title.rotate-90-right","title.rotate-180-right","title.flip-vertical","title.flip-horizontal"],["Rotate 45° Left","Rotate 90° Left","Rotate 180° Left","Rotate 45° Right","Rotate 90° Right","Rotate 180° Right","Flip Vertical","Flip Horizontal"]),ifLocale.setValues(GUndoAction,GLocale.Language.English,["title"],["Undo"]),ifLocale.setValues(GUngroupAction,GLocale.Language.English,["title"],["Ungroup Selection"]),ifLocale.setValues(GZoomInAction,GLocale.Language.English,["title"],["Zoom in"]),ifLocale.setValues(GZoomOutAction,GLocale.Language.English,["title"],["Zoom out"]),ifLocale.setValues(GAlignPalette,GLocale.Language.English,["title"],["Align"]),ifLocale.setValues(GExportPalette,GLocale.Language.English,["title"],["Export"]),ifLocale.setValues(GLayersPalette,GLocale.Language.English,["title"],["Layers"]),ifLocale.setValues(GPagesPalette,GLocale.Language.English,["title"],["Pages"]),ifLocale.setValues(GStylesPalette,GLocale.Language.English,["title"],["Styles"]),ifLocale.setValues(GSwatchesPalette,GLocale.Language.English,["title"],["Swatches"]),ifLocale.setValues(GTransformPalette,GLocale.Language.English,["title"],["Transform"]),ifLocale.setValues(GPropertiesPanel,GLocale.Language.English,["title"],["Properties"]),ifLocale.setValues(GDocumentSidebar,GLocale.Language.English,["title"],["Document Settings"]),function(){function a(){}GObject.inherit(a,GModule),a.prototype.init=function(){gravit.exporters.push(new GImageExporter),gravit.palettes.push(new GLayersPalette,new GPagesPalette,new GAlignPalette,new GTransformPalette,new GExportPalette,new GSwatchesPalette,new GStylesPalette),gravit.panels.push(new GPropertiesPanel),gravit.sidebars.push(new GDocumentSidebar),gravit.tools.push({instance:new GPointerTool,title:"Pointer",category:GApplication.TOOL_CATEGORY_SELECT,group:"select",keys:["V","0"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M3.5,18.5v18l5-7h9L3.5,18.5z"/>\n</svg>'},{instance:new GLassoTool,title:"Lasso",category:GApplication.TOOL_CATEGORY_SELECT,group:"select",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M18.5,27c-3.7,0-4.7,2.9-5.5,5.2c-0.7,2-1.2,3.2-2.5,3.2c-0.8,0-1.5-0.3-2.1-0.8\n	c-0.4-0.4-0.7-0.9-0.9-1.5c0.6-0.4,1-1,1-1.7c0-0.2,0-0.4-0.1-0.6c0.8-0.5,1.7-1.2,2.5-2c3.5-3.5,4.6-7.6,2.7-9.5\n	c-0.6-0.6-1.5-0.9-2.4-0.9c-2.1,0-4.7,1.3-7,3.6c-3.5,3.5-4.6,7.6-2.7,9.5c0.6,0.6,1.5,0.9,2.4,0.9c0.3,0,0.6,0,0.9-0.1\n	c0.3,0.6,1,1.1,1.8,1.1c0,0,0,0,0,0c0.3,0.7,0.6,1.4,1.2,1.9c0.7,0.7,1.7,1.1,2.8,1.1c2.2,0,2.8-2,3.5-4c0.8-2.3,1.6-4.6,4.5-4.6\n	C18.5,28,18.5,27,18.5,27z M2.1,30.9c-0.9-0.9-0.6-2.4-0.4-3.2c0.5-1.6,1.5-3.4,3.1-4.9c2-2,4.5-3.3,6.3-3.3c0.7,0,1.3,0.2,1.7,0.6\n	c0.4,0.4,0.6,1,0.6,1.7c0,1.9-1.3,4.3-3.3,6.3c-0.7,0.7-1.5,1.4-2.3,1.9c-0.4-0.3-0.8-0.5-1.4-0.5c-1.1,0-2,0.9-2,1.9\n	c-0.2,0-0.4,0.1-0.7,0.1C3.1,31.5,2.5,31.3,2.1,30.9z"/>\n</svg>'},{instance:new GSubSelectTool,title:"Subselect",category:GApplication.TOOL_CATEGORY_SELECT,group:"select2",keys:["A","1"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M3.5,18.5v18l5-7h9L3.5,18.5z M7.5,27.5l-3,4.5V20.5l9,7H7.5z"/>\n</svg>'},{instance:new GPageTool,title:"Page",category:GApplication.TOOL_CATEGORY_SELECT,group:"select3",keys:["D"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M15.5,18.5v10h-1v-9h-7v3h-3v10h3v1h-4v-12l3-3H15.5z M8.5,25.5v11l3.5-4h5.5L8.5,25.5z"/>\n</svg>'},{instance:new GLayerTool,title:"Layer",category:GApplication.TOOL_CATEGORY_SELECT,group:"select3",keys:["L"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.5 -.5 18 18" width="18px" height="18px">\n<path stroke="none" d="M0.5,8.5 L0.5,10.5 L4.5,10.5 L4.5,8.5 L0.5,8.5 Z M10.5,8.5 L10.5,10.5 L12.5,10.5 L12.5,8.5 L10.5,8.5 Z M9.5,8.5 L9.5,9.5 L10.5,9.5 L10.5,8.5 L9.5,8.5 Z M0.5,0.5 L0.5,2.5 L12.5,2.5 L12.5,0.5 L0.5,0.5 Z M0.5,4.5 L0.5,6.5 L12.5,6.5 L12.5,4.5 L0.5,4.5 Z M5.5,7.5 L5.5,18.5 L9,14.5 L14.5,14.5 L5.5,7.5 Z"></path>\n</svg>'},{instance:new GTransformTool,title:"Transform",category:GApplication.TOOL_CATEGORY_SELECT,group:"transform",keys:["Q"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M17.5,32.5H12l-3.5,4v-11L17.5,32.5z M3.5,18.5h-3v3h1v-2h2V18.5z M15.5,18.5v1h2v2h1v-3H15.5z M1.5,35.5v-2h-1v3h3v-1H1.5z M6.4,33.5H3.5v-12h12v7h1v-8h-14v14h3.9V33.5z"/>\n</svg>'},{instance:new GLineTool,title:"Line",category:GApplication.TOOL_CATEGORY_VECTOR,group:"line",keys:["N"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<rect stroke="none" x="9" y="15.3" transform="matrix(0.7069 0.7074 -0.7074 0.7069 22.2372 1.3418)" width="1" height="24.5"/>\n</svg>'},{instance:new GPenTool,title:"Pen",category:GApplication.TOOL_CATEGORY_VECTOR,group:"path",keys:["P"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M9.2,21.3l0.7,0.7l-6.5,3.6c0,0-0.5,3.1-1.4,5.7c-0.8,2.2-2.1,3.6-1.4,4.3c0,0,0,0,0.7,0.7\n	c0.7,0.7,2.1-0.6,4.3-1.4c2.5-0.9,5.6-1.4,5.6-1.4l3.7-6.4l0.7,0.7l2.9-2.1l-7.1-7.1L9.2,21.3z M4.2,26.4l6.5-3.6l3.6,3.6l-3.7,6.4\n	c-4.8,0.5-8.5,2.8-8.5,2.8l3.2-3.2c0.8,0.5,1.8,0.3,2.4-0.3c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0c-0.7,0.7-0.8,1.7-0.4,2.5\n	l-3.2,3.2C1.4,34.9,3.7,31.2,4.2,26.4z"/>\n</svg>'},{instance:new GBezigonTool,title:"Bezigon",category:GApplication.TOOL_CATEGORY_VECTOR,group:"path",keys:["B","8"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path d="M7.8,29.3c-1.8-1.7,4.4-10.8,4.4-10.8l1.3,1.2c-1.3,1.5-2.5,3.6-3.1,4.7c-1,1.8-1.1,2.7-1.1,2.7l6-5.7l3.1,3\n	C18.5,24.5,9.5,30.7,7.8,29.3z M18.5,33c0,0.8-0.7,1.5-1.5,1.5c-0.7,0-1.2-0.4-1.4-1H7.5v3h-7v-7h3v-8.1c-0.6-0.2-1-0.8-1-1.4\n	c0-0.8,0.7-1.5,1.5-1.5s1.5,0.7,1.5,1.5c0,0.7-0.4,1.2-1,1.4v8.1h3v3h8.1c0.2-0.6,0.8-1,1.4-1C17.8,31.5,18.5,32.2,18.5,33z\n	 M6.5,30.5h-5v5h5V30.5z" stroke="none"/>\n</svg>'},{instance:new GRectangleTool,title:"Rectangle",category:GApplication.TOOL_CATEGORY_VECTOR,group:"shape",keys:["R"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M17.5,20.5v14h-16v-14H17.5 M18.5,19.5h-18v16h18v-15V19.5L18.5,19.5z"/>\n</svg>'},{instance:new GEllipseTool,title:"Ellipse",category:GApplication.TOOL_CATEGORY_VECTOR,group:"shape2",keys:["E","3"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<ellipse style="fill:none; stroke: inherit" cx="9.5" cy="27.5" rx="8.5" ry="7.5"/>\n</svg>'},{instance:new GPolygonTool,title:"Polygon",category:GApplication.TOOL_CATEGORY_VECTOR,group:"shape2",keys:["G"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M13.4,20.5l3.9,7l-3.9,7H5.6l-3.9-7l3.9-7H13.4 M14,19.5H5l-4.5,8l4.5,8h9l4.5-8L14,19.5L14,19.5z"/>\n</svg>'},{instance:new GTextTool,title:"Text",category:GApplication.TOOL_CATEGORY_OTHER,group:"text",keys:["T"],icon:'<svg xmlns="http://www.w3.org/2000/svg">\n<text style="stroke:none; fill: inherit; font-family: Arial; font-size: 18px; text-anchor: middle" x="9" y="15">T</text>\n</svg>'},{instance:new GSliceTool,title:"Slice",category:GApplication.TOOL_CATEGORY_OTHER,group:"slice",keys:["K"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M14.8,19.3L2.6,33.4c-0.2,0.3-0.1,0.7,0.1,0.9c0.2,0.2,0.6,0.3,0.9,0.1c0,0,7.9-4.9,8-5.1l6.4-7.4l0,0 c0.8-0.9,0.5-2.2-0.3-2.9C16.9,18.3,15.6,18.3,14.8,19.3z M17,21l-6.3,7.4l-1.1-0.9l6.4-7.4c0.4-0.5,1-0.2,1-0.1 C17.2,20.2,17.2,20.7,17,21z M15.5,27.5v9h-15v-13v0h8v1h-7v11h13v-8H15.5z"/>\n</svg>'},{instance:new GZoomTool,title:"Zoom",category:GApplication.TOOL_CATEGORY_VIEW,group:"zoom",keys:["Z"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M17.9,34L15,31.2c1-1.3,1.5-2.9,1.5-4.7c0-4.4-3.6-8.1-8-8.1c-4.4,0-8.1,3.6-8.1,8.1c0,4.4,3.6,8,8.1,8\n	c1.8,0,3.4-0.6,4.7-1.5l2.8,2.8c0.7,0.7,1.7,0.8,2.2,0.3C18.7,35.7,18.6,34.7,17.9,34z M1.6,26.5c0-3.8,3.1-6.9,6.9-6.9s7,3.1,7,6.9\n	s-3.1,7-7,7S1.6,30.3,1.6,26.5z"/>\n</svg>'},{instance:new GHandTool,title:"Hand",category:GApplication.TOOL_CATEGORY_VIEW,group:"hand",keys:["H"],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.5 18.5 18 18">\n<path stroke="none" d="M13.7,22.6C10.3,19,7.9,19,7,19.2l-0.4-0.4c-0.1,0-0.5-0.3-1.1-0.3c-0.4,0-0.7,0.1-1,0.4\n	C4.2,19,4.1,19.2,4,19.4c-0.6-0.3-1.3-0.3-1.8,0.2c-0.3,0.3-0.5,0.7-0.5,1.1c0,0.1,0,0.3,0.1,0.4c-0.2,0.1-0.5,0.2-0.7,0.4\n	c-0.9,0.7-0.5,1.7-0.2,2.3c2.7,2.6,5.6,5.8,6.1,7c-0.5-0.2-1.4-0.9-1.9-1.4c-1.7-1.4-2.8-2.2-3.6-1.7c-0.6,0.3-0.7,0.8-0.8,1.1\n	c-0.4,1.5,3.4,5.2,3.6,5.4c1.2,1.3,8.9,2.4,8.9,2.4c0.1,0,0.2,0,0.3-0.1l4.8-3.3c0.1-0.1,0.2-0.2,0.2-0.4\n	C18.5,32.5,18.7,27.8,13.7,22.6z M13.1,35.5L13.1,35.5c-2.9-0.4-7.4-1.3-8.1-2.1c0,0-0.1-0.1-0.2-0.2c-2.6-2.7-3.6-4.1-3.1-4.6\n	c0.1-0.1,0.2-0.1,0.4-0.1c0.5,0,1.4,0.7,2.1,1.3L4.4,30c1,0.8,2.1,1.6,2.8,1.6c0.2,0,0.4-0.1,0.5-0.2c0.1-0.1,0.1-0.2,0.1-0.3\n	c0-1.3-3.2-5.1-6.3-8c-0.2-0.3-0.3-0.7,0-1C1.8,22,2,21.9,2.2,21.9c0.2,0,0.3,0.1,0.4,0.1l4.5,4.3c0.2,0.1,0.4,0.1,0.6,0\n	c0.1-0.1,0.1-0.1,0.1-0.2c0-0.1-0.1-0.3-0.1-0.3l-4.5-4.3c0,0-0.5-0.4-0.5-0.9c0-0.2,0.1-0.3,0.2-0.4c0.1-0.1,0.3-0.2,0.4-0.2\n	c0.4,0,0.9,0.4,1.1,0.7L9,25.2c0.2,0.1,0.4,0.1,0.6,0c0.1-0.1,0.1-0.1,0.1-0.2c0-0.1-0.1-0.3-0.1-0.3l-4.6-4.4\n	c-0.1-0.1-0.1-0.4,0.1-0.6c0.1-0.1,0.3-0.2,0.5-0.2c0.2,0,0.4,0.1,0.4,0.2h0l5,4.3c0.2,0.1,0.4,0.1,0.6,0c0.1-0.1,0.1-0.2,0.1-0.3\n	c0-0.1-0.1-0.2-0.1-0.3L7.8,20l0.5,0.1c1,0.2,2.6,0.9,4.7,3.1c4,4.2,4.5,8.1,4.5,9.2l0,0.1L13.1,35.5z"/>\n</svg>'}),gravit.properties.push(new GInfoProperties,new GPolygonProperties,new GPathProperties,new GRectangleProperties,new GEllipseProperties,new GTextProperties,new GImageProperties,new GSliceProperties,new GPageProperties,new GFillBorderProperties,new GEffectProperties,new GStyleProperties),gravit.actions.push(new GNewAction,new GOpenAction,new GSaveAction,new GSaveAsAction,new GSaveAllAction,new GPlaceImageAction,new GCloseAction,new GCloseAllAction,new GUndoAction,new GRedoAction,new GCutAction,new GCopyAction,new GPasteAction,new GDeleteAction,new GPasteInPlaceAction,new GPasteInsideAction,new GPasteStyleAction,new GDuplicateAction,new GCloneAction,new GSelectAllAction,new GInvertSelectionAction,new GArrangeAction(GArrangeAction.Type.SendToFront),new GArrangeAction(GArrangeAction.Type.BringForward),new GArrangeAction(GArrangeAction.Type.SendBackward),new GArrangeAction(GArrangeAction.Type.SendToBack),new GAlignAction(GAlignAction.Type.AlignLeft),new GAlignAction(GAlignAction.Type.AlignCenter),new GAlignAction(GAlignAction.Type.AlignRight),new GAlignAction(GAlignAction.Type.AlignJustifyHorizontal),new GAlignAction(GAlignAction.Type.AlignTop),new GAlignAction(GAlignAction.Type.AlignMiddle),new GAlignAction(GAlignAction.Type.AlignBottom),new GAlignAction(GAlignAction.Type.AlignJustifyVertical),new GDistributeAction(GDistributeAction.Type.Horizontal),new GDistributeAction(GDistributeAction.Type.Vertical),new GSnapUnitAction(GSnapUnitAction.Type.FullUnit),new GSnapUnitAction(GSnapUnitAction.Type.HalfUnit),new GTransformAction(GTransformAction.Type.Rotate45Left),new GTransformAction(GTransformAction.Type.Rotate90Left),new GTransformAction(GTransformAction.Type.Rotate180Left),new GTransformAction(GTransformAction.Type.Rotate45Right),new GTransformAction(GTransformAction.Type.Rotate90Right),new GTransformAction(GTransformAction.Type.Rotate180Right),new GTransformAction(GTransformAction.Type.FlipVertical),new GTransformAction(GTransformAction.Type.FlipHorizontal),new GGroupAction,new GUngroupAction,new GSliceFromSelectionAction,new GConvertToPathAction,new GJoinPathsAction,new GAddPageAction,new GDeletePageAction,new GAddLayerAction,new GDeleteLayerAction,new GLayerTypeAction(GLayer.Type.Output),new GLayerTypeAction(GLayer.Type.Draft),new GLayerTypeAction(GLayer.Type.Guide),new GOriginalViewAction,new GFitSelectionAction,new GFitCurrentPageAction,new GFitCurrentLayerAction,new GFitAllAction,new GMagnificationAction(6,null),new GMagnificationAction(12,null),new GMagnificationAction(25,null),new GMagnificationAction(50,[GKey.Constant.META,"5"]),new GMagnificationAction(100,[GKey.Constant.META,"1"]),new GMagnificationAction(200,[GKey.Constant.META,"2"]),new GMagnificationAction(400,[GKey.Constant.META,"4"]),new GMagnificationAction(800,[GKey.Constant.META,"8"]),new GZoomInAction,new GZoomOutAction,new GPaintModeAction(GScenePaintConfiguration.PaintMode.Full),new GPaintModeAction(GScenePaintConfiguration.PaintMode.Fast),new GPaintModeAction(GScenePaintConfiguration.PaintMode.Outline),new GPaintModeAction(GScenePaintConfiguration.PaintMode.Output),new GPixelPreviewAction,new GShowAllPagesAction,new GShowGridAction,new GShowRulersAction,new GNewWindowAction)},a.prototype.toString=function(){return"[Module Gravit]"},gravit.modules.push(new a)}(this);